// Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ú©Ø§Ù…Ù„ Ù„ØºØ§Øª A1 Ø¨Ø§ phrasal verbs Ùˆ phrases
const DICTIONARY_DB = {
    "hello": {
        word: "hello",
        persian: "Ø³Ù„Ø§Ù…",
        english: "a greeting when you meet someone",
        examples: ["Hello, how are you?", "She said hello to everyone."],
        collocations: ["say hello", "hello there", "hello everyone"],
        phrasalVerbs: [],
        phrases: [
            { phrase: "Hello there!", meaning: "Ø³Ù„Ø§Ù…! (Ø±Ø³Ù…ÛŒâ€ŒØªØ±)", example: "Hello there! How have you been?" }
        ],
        level: "A1"
    },
    "good": {
        word: "good",
        persian: "Ø®ÙˆØ¨",
        english: "of a high quality or standard",
        examples: ["This is good food.", "He is a good teacher."],
        collocations: ["good morning", "good idea", "good job", "good friend"],
        phrasalVerbs: [],
        phrases: [
            { phrase: "good for you", meaning: "Ø¢ÙØ±ÛŒÙ†ØŒ Ø®ÙˆØ¨Ù‡ Ø¨Ø±Ø§Øª", example: "You passed the exam? Good for you!" },
            { phrase: "as good as", meaning: "Ø¨Ù‡ Ø®ÙˆØ¨ÛŒ", example: "This phone is as good as new." }
        ],
        level: "A1"
    },
    "go": {
        word: "go",
        persian: "Ø±ÙØªÙ†",
        english: "to move or travel to a place",
        examples: ["I go to school every day.", "Let's go to the park."],
        collocations: ["go home", "go to school", "go shopping", "go crazy"],
        phrasalVerbs: [
            { verb: "go on", meaning: "Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø¯Ù†", example: "Please go on with your story." },
            { verb: "go out", meaning: "Ø¨ÛŒØ±ÙˆÙ† Ø±ÙØªÙ†", example: "We go out every Friday." },
            { verb: "go up", meaning: "Ø¨Ø§Ù„Ø§ Ø±ÙØªÙ†", example: "Prices go up every year." },
            { verb: "go down", meaning: "Ù¾Ø§ÛŒÛŒÙ† Ø±ÙØªÙ†", example: "The sun goes down in the evening." }
        ],
        phrases: [
            { phrase: "go ahead", meaning: "Ø¨Ø±Ùˆ Ø¬Ù„ÙˆØŒ Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯Ù‡", example: "Can I use your phone? Go ahead!" },
            { phrase: "go away", meaning: "Ø¨Ø±ÙˆØŒ Ø¯ÙˆØ± Ø´Ùˆ", example: "Go away and leave me alone." }
        ],
        level: "A1"
    },
    "have": {
        word: "have",
        persian: "Ø¯Ø§Ø´ØªÙ†",
        english: "to own or possess something",
        examples: ["I have a new car.", "She has three brothers."],
        collocations: ["have a car", "have breakfast", "have fun", "have a problem"],
        phrasalVerbs: [
            { verb: "have to", meaning: "Ù…Ø¬Ø¨ÙˆØ± Ø¨ÙˆØ¯Ù†", example: "I have to go now." },
            { verb: "have on", meaning: "Ù¾ÙˆØ´ÛŒØ¯Ù†", example: "What do you have on today?" },
            { verb: "have off", meaning: "Ù…Ø±Ø®ØµÛŒ Ø¯Ø§Ø´ØªÙ†", example: "I have tomorrow off from work." }
        ],
        phrases: [
            { phrase: "have a good time", meaning: "Ø®ÙˆØ´ Ø¨Ú¯Ø°Ø±Ø§Ù†Ø¯Ù†", example: "Have a good time at the party!" },
            { phrase: "have no idea", meaning: "Ù‡ÛŒÚ† Ù†Ø¸Ø±ÛŒ Ù†Ø¯Ø§Ø´ØªÙ†", example: "I have no idea where he is." }
        ],
        level: "A1"
    },
    "do": {
        word: "do",
        persian: "Ø§Ù†Ø¬Ø§Ù… Ø¯Ø§Ø¯Ù†",
        english: "to perform an action or activity",
        examples: ["What are you doing?", "I do my homework every day."],
        collocations: ["do homework", "do business", "do exercise", "do nothing"],
        phrasalVerbs: [
            { verb: "do up", meaning: "Ø¨Ø³ØªÙ† (Ø¯Ú©Ù…Ù‡ØŒ Ø²ÛŒÙ¾)", example: "Do up your coat, it's cold." },
            { verb: "do without", meaning: "Ø¨Ø¯ÙˆÙ† Ú†ÛŒØ²ÛŒ Ø³Ø± Ú©Ø±Ø¯Ù†", example: "I can do without coffee for a day." },
            { verb: "do over", meaning: "Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù†Ø¬Ø§Ù… Ø¯Ø§Ø¯Ù†", example: "This work is bad, you need to do it over." }
        ],
        phrases: [
            { phrase: "do me a favor", meaning: "Ù„Ø·ÙÛŒ Ø¨Ù‡ Ù…Ù† Ø¨Ú©Ù†", example: "Can you do me a favor?" },
            { phrase: "do the dishes", meaning: "Ø¸Ø±Ù Ø´Ø³ØªÙ†", example: "I'll do the dishes tonight." }
        ],
        level: "A1"
    },
    "get": {
        word: "get",
        persian: "Ú¯Ø±ÙØªÙ† / Ø´Ø¯Ù†",
        english: "to receive, obtain, or become",
        examples: ["I get a lot of emails.", "It's getting dark."],
        collocations: ["get ready", "get married", "get better", "get home"],
        phrasalVerbs: [
            { verb: "get up", meaning: "Ø¨Ù„Ù†Ø¯ Ø´Ø¯Ù† (Ø§Ø² Ø®ÙˆØ§Ø¨)", example: "I get up at 7 AM every day." },
            { verb: "get on", meaning: "Ø³ÙˆØ§Ø± Ø´Ø¯Ù†", example: "Get on the bus quickly." },
            { verb: "get off", meaning: "Ù¾ÛŒØ§Ø¯Ù‡ Ø´Ø¯Ù†", example: "Get off at the next station." },
            { verb: "get out", meaning: "Ø¨ÛŒØ±ÙˆÙ† Ø¢Ù…Ø¯Ù†", example: "Get out of the car now!" }
        ],
        phrases: [
            { phrase: "get lost", meaning: "Ú¯Ù… Ø´Ø¯Ù†", example: "I always get lost in this city." },
            { phrase: "get well soon", meaning: "Ø²ÙˆØ¯ Ø®ÙˆØ¨ Ø´ÙˆÛŒØ¯", example: "You're sick? Get well soon!" }
        ],
        level: "A1"
    },
    "make": {
        word: "make",
        persian: "Ø³Ø§Ø®ØªÙ†",
        english: "to create or produce something",
        examples: ["She makes beautiful cakes.", "I need to make a decision."],
        collocations: ["make money", "make friends", "make dinner", "make progress"],
        phrasalVerbs: [
            { verb: "make up", meaning: "Ø³Ø§Ø®ØªÙ† (Ø¯Ø§Ø³ØªØ§Ù†)ØŒ Ø¬Ø¨Ø±Ø§Ù† Ú©Ø±Ø¯Ù†", example: "He made up a funny story." },
            { verb: "make out", meaning: "ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù†", example: "I can't make out the words from here." }
        ],
        phrases: [
            { phrase: "make sense", meaning: "Ù…Ù†Ø·Ù‚ÛŒ Ø¨ÙˆØ¯Ù†", example: "Your idea makes sense." },
            { phrase: "make sure", meaning: "Ù…Ø·Ù…Ø¦Ù† Ø´Ø¯Ù†", example: "Make sure you lock the door." }
        ],
        level: "A1"
    },
    "take": {
        word: "take",
        persian: "Ú¯Ø±ÙØªÙ† / Ø¨Ø±Ø¯Ø§Ø´ØªÙ†",
        english: "to move or carry something",
        examples: ["Take this book.", "She takes the bus to work."],
        collocations: ["take a break", "take time", "take photos", "take a shower"],
        phrasalVerbs: [
            { verb: "take off", meaning: "Ø¨Ù„Ù†Ø¯ Ø´Ø¯Ù† (Ù‡ÙˆØ§Ù¾ÛŒÙ…Ø§)ØŒ Ø¯Ø±Ø¢ÙˆØ±Ø¯Ù† (Ù„Ø¨Ø§Ø³)", example: "The plane takes off at 5 PM." },
            { verb: "take on", meaning: "Ù¾Ø°ÛŒØ±ÙØªÙ† (Ú©Ø§Ø±)", example: "I can't take on more work now." },
            { verb: "take out", meaning: "Ø¨ÛŒØ±ÙˆÙ† Ø¢ÙˆØ±Ø¯Ù†", example: "Take out the trash, please." }
        ],
        phrases: [
            { phrase: "take it easy", meaning: "Ø¢Ø±Ø§Ù… Ø¨Ø§Ø´", example: "Don't work too hard, take it easy." },
            { phrase: "take your time", meaning: "Ø¹Ø¬Ù„Ù‡ Ù†Ú©Ù†", example: "Take your time, we're not in a hurry." }
        ],
        level: "A1"
    },
    "come": {
        word: "come",
        persian: "Ø¢Ù…Ø¯Ù†",
        english: "to move towards the speaker or a place",
        examples: ["Come here, please.", "She comes to work by bus."],
        collocations: ["come here", "come back", "come home", "come soon"],
        phrasalVerbs: [
            { verb: "come from", meaning: "Ø§Ù‡Ù„ Ø¬Ø§ÛŒÛŒ Ø¨ÙˆØ¯Ù†", example: "I come from Iran." },
            { verb: "come back", meaning: "Ø¨Ø±Ú¯Ø´ØªÙ†", example: "When will you come back?" },
            { verb: "come in", meaning: "Ø¨ÛŒØ§ Ø¯Ø§Ø®Ù„", example: "Come in, the door is open." }
        ],
        phrases: [
            { phrase: "come on", meaning: "Ø²ÙˆØ¯ Ø¨Ø§Ø´ØŒ Ø¨ÛŒØ§ Ø¯ÛŒÚ¯Ù‡", example: "Come on, we're late!" },
            { phrase: "come true", meaning: "Ø¨Ù‡ ÙˆØ§Ù‚Ø¹ÛŒØª Ù¾ÛŒÙˆØ³ØªÙ†", example: "My dream came true." }
        ],
        level: "A1"
    },
    "see": {
        word: "see",
        persian: "Ø¯ÛŒØ¯Ù†",
        english: "to notice with your eyes",
        examples: ["I see a bird in the tree.", "See you tomorrow!"],
        collocations: ["see you", "see a movie", "see the doctor", "see clearly"],
        phrasalVerbs: [
            { verb: "see to", meaning: "Ø±Ø³ÛŒØ¯Ú¯ÛŒ Ú©Ø±Ø¯Ù†", example: "I'll see to this problem." },
            { verb: "see off", meaning: "Ø¨Ø¯Ø±Ù‚Ù‡ Ú©Ø±Ø¯Ù†", example: "I'll see you off at the airport." }
        ],
        phrases: [
            { phrase: "I see", meaning: "Ù…ØªÙˆØ¬Ù‡ Ø´Ø¯Ù…", example: "Oh, I see what you mean now." },
            { phrase: "see you later", meaning: "Ø¨Ø¹Ø¯Ø§Ù‹ Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù…Øª", example: "I have to go now, see you later!" }
        ],
        level: "A1"
    },
    "know": {
        word: "know",
        persian: "Ø¯Ø§Ù†Ø³ØªÙ†",
        english: "to have information about something",
        examples: ["I know him very well.", "Do you know the answer?"],
        collocations: ["know someone", "know the answer", "know English", "know how"],
        phrasalVerbs: [],
        phrases: [
            { phrase: "I don't know", meaning: "Ù†Ù…ÛŒâ€ŒØ¯Ø§Ù†Ù…", example: "I don't know where she is." },
            { phrase: "you know", meaning: "Ù…ÛŒâ€ŒØ¯ÙˆÙ†ÛŒ (Ø¯Ø± Ú¯ÙØªÚ¯Ùˆ)", example: "It was, you know, very strange." }
        ],
        level: "A1"
    },
    "think": {
        word: "think",
        persian: "ÙÚ©Ø± Ú©Ø±Ø¯Ù†",
        english: "to use your mind to consider something",
        examples: ["I think it's a good idea.", "What do you think?"],
        collocations: ["think about", "think so", "think hard", "think fast"],
        phrasalVerbs: [
            { verb: "think over", meaning: "Ø¨Ø§ Ø¯Ù‚Øª ÙÚ©Ø± Ú©Ø±Ø¯Ù†", example: "Think over my offer carefully." },
            { verb: "think up", meaning: "Ø§Ø¨Ø¯Ø§Ø¹ Ú©Ø±Ø¯Ù†", example: "He thought up a new game." }
        ],
        phrases: [
            { phrase: "I think so", meaning: "ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù… Ø¢Ø±Ù‡", example: "Is it going to rain? I think so." },
            { phrase: "think twice", meaning: "Ø¯Ùˆ Ø¨Ø§Ø± ÙÚ©Ø± Ú©Ø±Ø¯Ù†", example: "Think twice before you decide." }
        ],
        level: "A1"
    },
    "look": {
        word: "look",
        persian: "Ù†Ú¯Ø§Ù‡ Ú©Ø±Ø¯Ù†",
        english: "to turn your eyes toward something",
        examples: ["Look at this picture!", "She looks tired."],
        collocations: ["look at", "look good", "look for", "look like"],
        phrasalVerbs: [
            { verb: "look after", meaning: "Ù…Ø±Ø§Ù‚Ø¨Øª Ú©Ø±Ø¯Ù†", example: "Can you look after my bag?" },
            { verb: "look up", meaning: "Ø¨Ø§Ù„Ø§ Ù†Ú¯Ø§Ù‡ Ú©Ø±Ø¯Ù†ØŒ Ø¬Ø³ØªØ¬Ùˆ Ú©Ø±Ø¯Ù†", example: "Look up the word in the dictionary." },
            { verb: "look for", meaning: "Ø¨Ù‡ Ø¯Ù†Ø¨Ø§Ù„ Ú†ÛŒØ²ÛŒ Ú¯Ø´ØªÙ†", example: "I'm looking for my keys." }
        ],
        phrases: [
            { phrase: "look out", meaning: "Ù…ÙˆØ§Ø¸Ø¨ Ø¨Ø§Ø´", example: "Look out! There's a car coming!" },
            { phrase: "look forward to", meaning: "Ø¨ÛŒâ€ŒØµØ¨Ø±Ø§Ù†Ù‡ Ù…Ù†ØªØ¸Ø± Ø¨ÙˆØ¯Ù†", example: "I look forward to seeing you." }
        ],
        level: "A1"
    },
    "want": {
        word: "want",
        persian: "Ø®ÙˆØ§Ø³ØªÙ†",
        english: "to desire or wish for something",
        examples: ["I want a cup of coffee.", "She wants to learn English."],
        collocations: ["want to go", "want more", "want something", "want help"],
        phrasalVerbs: [],
        phrases: [
            { phrase: "I want to", meaning: "Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù…", example: "I want to visit Paris one day." },
            { phrase: "for want of", meaning: "Ø¨Ù‡ Ø¹Ù„Øª Ú©Ù…Ø¨ÙˆØ¯", example: "The project failed for want of money." }
        ],
        level: "A1"
    },
    "need": {
        word: "need",
        persian: "Ù†ÛŒØ§Ø² Ø¯Ø§Ø´ØªÙ†",
        english: "to require something because it is necessary",
        examples: ["I need some help.", "You need to study more."],
        collocations: ["need help", "need time", "need money", "need to know"],
        phrasalVerbs: [],
        phrases: [
            { phrase: "in need", meaning: "Ù†ÛŒØ§Ø²Ù…Ù†Ø¯", example: "We should help people in need." },
            { phrase: "if need be", meaning: "Ø§Ú¯Ø± Ù„Ø§Ø²Ù… Ø¨Ø§Ø´Ø¯", example: "I'll work all night if need be." }
        ],
        level: "A1"
    },
    "like": {
        word: "like",
        persian: "Ø¯ÙˆØ³Øª Ø¯Ø§Ø´ØªÙ†",
        english: "to enjoy or approve of something",
        examples: ["I like apples.", "She likes music."],
        collocations: ["like to", "like it", "like someone", "like very much"],
        phrasalVerbs: [],
        phrases: [
            { phrase: "would like", meaning: "Ù…Ø§ÛŒÙ„ Ø¨ÙˆØ¯Ù†", example: "I would like some tea, please." },
            { phrase: "like crazy", meaning: "Ø¯ÛŒÙˆØ§Ù†Ù‡â€ŒÙˆØ§Ø±", example: "They were running like crazy." }
        ],
        level: "A1"
    },
    "work": {
        word: "work",
        persian: "Ú©Ø§Ø± Ú©Ø±Ø¯Ù†",
        english: "to do a job or activity",
        examples: ["I work from 9 to 5.", "She works in a bank."],
        collocations: ["work hard", "work late", "work from home", "work well"],
        phrasalVerbs: [
            { verb: "work out", meaning: "ÙˆØ±Ø²Ø´ Ú©Ø±Ø¯Ù†ØŒ Ø­Ù„ Ú©Ø±Ø¯Ù†", example: "I work out at the gym every day." },
            { verb: "work on", meaning: "Ø±ÙˆÛŒ Ú†ÛŒØ²ÛŒ Ú©Ø§Ø± Ú©Ø±Ø¯Ù†", example: "I'm working on a new project." }
        ],
        phrases: [
            { phrase: "work of art", meaning: "Ø§Ø«Ø± Ù‡Ù†Ø±ÛŒ", example: "This painting is a true work of art." },
            { phrase: "hard work", meaning: "Ú©Ø§Ø± Ø³Ø®Øª", example: "Learning English is hard work." }
        ],
        level: "A1"
    },
    "live": {
        word: "live",
        persian: "Ø²Ù†Ø¯Ú¯ÛŒ Ú©Ø±Ø¯Ù†",
        english: "to have your home in a place",
        examples: ["I live in Tehran.", "They live happily together."],
        collocations: ["live here", "live with", "live well", "live alone"],
        phrasalVerbs: [
            { verb: "live on", meaning: "Ø²Ù†Ø¯Ú¯ÛŒ Ú©Ø±Ø¯Ù† Ø¨Ø§ (Ù¾ÙˆÙ„ØŒ ØºØ°Ø§)", example: "We live on $500 a month." },
            { verb: "live up to", meaning: "Ø¯Ø± Ø­Ø¯ Ø§Ù†ØªØ¸Ø§Ø± Ø¨ÙˆØ¯Ù†", example: "The movie lived up to my expectations." }
        ],
        phrases: [
            { phrase: "live and learn", meaning: "Ø²Ù†Ø¯Ú¯ÛŒ Ú©Ù†ÛŒÙ… Ùˆ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±ÛŒÙ…", example: "I made a mistake, but live and learn!" },
            { phrase: "live it up", meaning: "Ø®ÙˆØ´ Ú¯Ø°Ø±Ø§Ù†Ø¯Ù†", example: "You're on vacation, live it up!" }
        ],
        level: "A1"
    },
    "time": {
        word: "time",
        persian: "Ø²Ù…Ø§Ù†",
        english: "what is measured in minutes, hours, days, etc.",
        examples: ["What time is it?", "I don't have much time."],
        collocations: ["spend time", "waste time", "save time", "free time"],
        phrasalVerbs: [],
        phrases: [
            { phrase: "on time", meaning: "Ø³Ø± ÙˆÙ‚Øª", example: "Please arrive on time for the meeting." },
            { phrase: "from time to time", meaning: "Ú¯Ø§Ù‡ÛŒ Ø§ÙˆÙ‚Ø§Øª", example: "I visit my grandmother from time to time." },
            { phrase: "time after time", meaning: "Ø¨Ø§Ø±Ù‡Ø§ Ùˆ Ø¨Ø§Ø±Ù‡Ø§", example: "He makes the same mistake time after time." }
        ],
        level: "A1"
    },
    "people": {
        word: "people",
        persian: "Ù…Ø±Ø¯Ù…",
        english: "men, women, and children",
        examples: ["Many people were at the park.", "Young people like technology."],
        collocations: ["old people", "young people", "local people", "many people"],
        phrasalVerbs: [],
        phrases: [
            { phrase: "people say", meaning: "Ù…Ø±Ø¯Ù… Ù…ÛŒâ€ŒÚ¯ÙˆÛŒÙ†Ø¯", example: "People say that he is very rich." },
            { phrase: "of all people", meaning: "Ø§Ø² Ø¨ÛŒÙ† Ù‡Ù…Ù‡ Ù…Ø±Ø¯Ù…", example: "You, of all people, should understand." }
        ],
        level: "A1"
    }
};

// ØªØ§Ø¨Ø¹ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¨Ø³ÛŒØ§Ø± Ø³Ø§Ø¯Ù‡
function searchWord(word) {
    const wordLower = word.toLowerCase().trim();
    
    // Ø§Ú¯Ø± Ù„ØºØª Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ø´Ø¯
    if (DICTIONARY_DB[wordLower]) {
        return DICTIONARY_DB[wordLower];
    }
    
    // Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø´Ø§Ø¨Ù‡ Ø¨Ø±Ø§ÛŒ ØªØ³Øª
    const similarWords = [];
    for (const key in DICTIONARY_DB) {
        if (key.includes(wordLower) || wordLower.includes(key)) {
            similarWords.push({
                word: key,
                persian: DICTIONARY_DB[key].persian
            });
        }
    }
    
    if (similarWords.length > 0) {
        return {
            word: wordLower,
            suggestions: similarWords.slice(0, 5)
        };
    }
    
    return null;
}

// ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬
function showWordResult(result) {
    const resultsArea = document.getElementById('resultsArea');
    if (!resultsArea) {
        console.error('Element with id "resultsArea" not found!');
        return;
    }
    
    // Ø§Ú¯Ø± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯
    if (result.suggestions) {
        let html = '<div class="suggestions-box"><h3>Ø¢ÛŒØ§ Ù…Ù†Ø¸ÙˆØ± Ø´Ù…Ø§ Ø§ÛŒÙ† Ø§Ø³ØªØŸ</h3>';
        result.suggestions.forEach(suggestion => {
            html += `
                <div class="suggestion-item" onclick="selectWord('${suggestion.word}')">
                    <strong>${suggestion.word}</strong> - ${suggestion.persian}
                </div>
            `;
        });
        html += '</div>';
        resultsArea.innerHTML = html;
        return;
    }
    
    // Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ù…Ù„ Ù„ØºØª
    const word = result.word;
    const persian = result.persian;
    const english = result.english;
    const examples = result.examples || [];
    const collocations = result.collocations || [];
    const phrasalVerbs = result.phrasalVerbs || [];
    const phrases = result.phrases || [];
    
    // Ø³Ø§Ø®Øª HTML
    let examplesHtml = examples.map(ex => `
        <div class="example">
            <div class="example-text">${ex}</div>
        </div>
    `).join('');
    
    let collocationsHtml = '';
    if (collocations.length > 0) {
        collocationsHtml = `
            <div class="section">
                <h4><i class="fas fa-link"></i> Ú©Ø§Ù„ÙˆÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§</h4>
                <div class="tags">
                    ${collocations.map(coll => `<span class="tag">${coll}</span>`).join('')}
                </div>
            </div>
        `;
    }
    
    let phrasalVerbsHtml = '';
    if (phrasalVerbs.length > 0) {
        phrasalVerbsHtml = `
            <div class="section">
                <h4><i class="fas fa-random"></i> Ø§ÙØ¹Ø§Ù„ Ù…Ø±Ú©Ø¨</h4>
                ${phrasalVerbs.map(pv => `
                    <div class="phrasal-verb">
                        <strong>${pv.verb}</strong>
                        <span>${pv.meaning}</span>
                        <div class="example-small">Ù…Ø«Ø§Ù„: ${pv.example}</div>
                    </div>
                `).join('')}
            </div>
        `;
    }
    
    let phrasesHtml = '';
    if (phrases.length > 0) {
        phrasesHtml = `
            <div class="section">
                <h4><i class="fas fa-quote-right"></i> Ø¹Ø¨Ø§Ø±Ø§Øª</h4>
                ${phrases.map(ph => `
                    <div class="phrase">
                        <strong>${ph.phrase}</strong>
                        <span>${ph.meaning}</span>
                        <div class="example-small">Ù…Ø«Ø§Ù„: ${ph.example}</div>
                    </div>
                `).join('')}
            </div>
        `;
    }
    
    resultsArea.innerHTML = `
        <div class="word-card">
            <div class="word-header">
                <h2 class="word">${word}</h2>
                <button class="play-btn" onclick="speakWord('${word}')">
                    <i class="fas fa-volume-up"></i>
                </button>
            </div>
            
            <div class="word-meanings">
                <div class="meaning">
                    <strong>ÙØ§Ø±Ø³ÛŒ:</strong> ${persian}
                </div>
                <div class="meaning">
                    <strong>ØªØ¹Ø±ÛŒÙ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ:</strong> ${english}
                </div>
            </div>
            
            <div class="section">
                <h4><i class="fas fa-comment"></i> Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§</h4>
                <div class="examples-container">
                    ${examplesHtml}
                </div>
            </div>
            
            ${collocationsHtml}
            ${phrasalVerbsHtml}
            ${phrasesHtml}
            
            <div class="word-footer">
                <span class="level">Ø³Ø·Ø­: ${result.level}</span>
                <button class="save-btn" onclick="saveToLeitner('${word}')">
                    <i class="far fa-star"></i> Ø°Ø®ÛŒØ±Ù‡
                </button>
            </div>
        </div>
    `;
}

// ØªØ§Ø¨Ø¹ Ø§Ù†ØªØ®Ø§Ø¨ Ù„ØºØª Ø§Ø² Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª
function selectWord(word) {
    document.getElementById('wordInput').value = word;
    performSearch();
}

// ØªØ§Ø¨Ø¹ Ø¬Ø³ØªØ¬Ùˆ
function performSearch() {
    const word = document.getElementById('wordInput').value.trim();
    if (!word) {
        alert('Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ù„ØºØª ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        return;
    }
    
    const result = searchWord(word);
    if (result) {
        showWordResult(result);
        
        // Ù¾Ø®Ø´ ØµÙˆØª Ø§Ú¯Ø± TTS ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
        if (window.TTSSystem && window.TTSSystem.isEnabled) {
            window.TTSSystem.speakWord(word);
        }
    } else {
        document.getElementById('resultsArea').innerHTML = `
            <div class="no-results">
                <i class="fas fa-search"></i>
                <h3>Ù„ØºØª "${word}" ÛŒØ§ÙØª Ù†Ø´Ø¯</h3>
                <p>Ù…Ø·Ù…Ø¦Ù† Ø¨Ø§Ø´ÛŒØ¯ Ø§Ù…Ù„Ø§ÛŒ Ø¢Ù† Ø¯Ø±Ø³Øª Ø§Ø³Øª.</p>
                <p>Ù„ØºØ§Øª Ù…ÙˆØ¬ÙˆØ¯: hello, good, go, have, do, get, make, take, come, see, know, think, look, want, need, like, work, live, time, people</p>
            </div>
        `;
    }
}

// ØªØ§Ø¨Ø¹ Ù¾Ø®Ø´ ØµÙˆØª
function speakWord(word) {
    if (window.TTSSystem) {
        window.TTSSystem.speakWord(word);
    } else {
        // Ø§Ú¯Ø± TTS Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³ØªØŒ Ø§Ø² Web Speech API Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†
        if ('speechSynthesis' in window) {
            const utterance = new SpeechSynthesisUtterance(word);
            utterance.lang = 'en-US';
            utterance.rate = 0.7;
            speechSynthesis.speak(utterance);
        }
    }
}

// ØªØ§Ø¨Ø¹ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Ù„Ø§ÛŒØªÙ†Ø±
function saveToLeitner(word) {
    const wordData = searchWord(word);
    if (wordData && window.LeitnerSystem) {
        window.LeitnerSystem.addWord(word, wordData.persian, wordData.examples);
        alert(`"${word}" Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… Ù„Ø§ÛŒØªÙ†Ø± Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯!`);
    } else {
        alert("Ø³ÛŒØ³ØªÙ… Ù„Ø§ÛŒØªÙ†Ø± Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª");
    }
}

// ÙˆÙ‚ØªÛŒ ØµÙØ­Ù‡ Ù„ÙˆØ¯ Ø´Ø¯
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸ“˜ Dictionary loaded with', Object.keys(DICTIONARY_DB).length, 'words');
    
    // Ø§ØªØµØ§Ù„ Ø¯Ú©Ù…Ù‡ Ø¬Ø³ØªØ¬Ùˆ
    const searchBtn = document.getElementById('searchBtn');
    const wordInput = document.getElementById('wordInput');
    
    if (searchBtn) {
        searchBtn.addEventListener('click', performSearch);
    }
    
    if (wordInput) {
        wordInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
    }
    
    // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ø®ÙˆØ´â€ŒØ¢Ù…Ø¯
    const resultsArea = document.getElementById('resultsArea');
    if (resultsArea && resultsArea.innerHTML === '') {
        resultsArea.innerHTML = `
            <div class="welcome-card">
                <i class="fas fa-language"></i>
                <h3>Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ø¨Ù‡ ÙØ§Ø±Ø³ÛŒ</h3>
                <p>ÛŒÚ© Ù„ØºØª Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†ÛŒØ¯</p>
                <div class="quick-words">
                    <button onclick="selectWord('hello')">hello</button>
                    <button onclick="selectWord('good')">good</button>
                    <button onclick="selectWord('time')">time</button>
                    <button onclick="selectWord('go')">go</button>
                </div>
            </div>
        `;
    }
});

// Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† ØªÙˆØ§Ø¨Ø¹ Ø¨Ù‡ window Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø² HTML
window.searchWord = searchWord;
window.showWordResult = showWordResult;
window.selectWord = selectWord;
window.performSearch = performSearch;
window.speakWord = speakWord;
window.saveToLeitner = saveToLeitner;

console.log('âœ… Dictionary system ready! Try searching: "hello", "go", "have"');
