// Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ú©Ø§Ù…Ù„ Ù„ØºØ§Øª A1 Ø¨Ø§ Ø¬Ø²Ø¦ÛŒØ§Øª
const DICTIONARY_DB = {
    // 1-10: Ø§ÙØ¹Ø§Ù„ Ù¾Ø§ÛŒÙ‡
    "be": {
        word: "be",
        phonetic: "/biË/",
        level: "A1",
        meanings: [
            {
                partOfSpeech: "verb",
                persian: "Ø¨ÙˆØ¯Ù†",
                english: "to exist or live",
                examples: [
                    {
                        english: "I want to be a doctor.",
                        persian: "Ù…Ù† Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… Ø¯Ú©ØªØ± Ø¨Ø§Ø´Ù…."
                    },
                    {
                        english: "Be happy!",
                        persian: "Ø®ÙˆØ´Ø­Ø§Ù„ Ø¨Ø§Ø´!"
                    }
                ]
            }
        ],
        collocations: [
            "be happy",
            "be ready",
            "be sure",
            "be careful",
            "be quiet"
        ],
        phrasalVerbs: [
            {
                verb: "be up to",
                persian: "Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù… Ú©Ø§Ø±ÛŒ Ø¨ÙˆØ¯Ù†",
                example: "What are you up to? (Ø¯Ø§Ø±ÛŒ Ú†ÛŒÚ©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŸ)"
            }
        ],
        synonyms: ["exist", "live"],
        frequency: 10
    },

    "have": {
        word: "have",
        phonetic: "/hÃ¦v/",
        level: "A1",
        meanings: [
            {
                partOfSpeech: "verb",
                persian: "Ø¯Ø§Ø´ØªÙ†",
                english: "to possess or own something",
                examples: [
                    {
                        english: "I have a car.",
                        persian: "Ù…Ù† ÛŒÚ© Ù…Ø§Ø´ÛŒÙ† Ø¯Ø§Ø±Ù…."
                    },
                    {
                        english: "She has three brothers.",
                        persian: "Ø§Ùˆ Ø³Ù‡ Ø¨Ø±Ø§Ø¯Ø± Ø¯Ø§Ø±Ø¯."
                    }
                ]
            }
        ],
        collocations: [
            "have a car",
            "have time",
            "have breakfast",
            "have fun",
            "have a problem"
        ],
        phrasalVerbs: [
            {
                verb: "have to",
                persian: "Ù…Ø¬Ø¨ÙˆØ± Ø¨ÙˆØ¯Ù†",
                example: "I have to go now. (Ø§Ù„Ø§Ù† Ø¨Ø§ÛŒØ¯ Ø¨Ø±Ù….)"
            },
            {
                verb: "have on",
                persian: "Ù¾ÙˆØ´ÛŒØ¯Ù†",
                example: "What do you have on today? (Ø§Ù…Ø±ÙˆØ² Ú†ÛŒ Ù¾ÙˆØ´ÛŒØ¯ÛŒØŸ)"
            }
        ],
        synonyms: ["possess", "own"],
        frequency: 10
    },

    "do": {
        word: "do",
        phonetic: "/duË/",
        level: "A1",
        meanings: [
            {
                partOfSpeech: "verb",
                persian: "Ø§Ù†Ø¬Ø§Ù… Ø¯Ø§Ø¯Ù†",
                english: "to perform an action or activity",
                examples: [
                    {
                        english: "What are you doing?",
                        persian: "Ø¯Ø§Ø±ÛŒ Ú†ÛŒÚ©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŸ"
                    },
                    {
                        english: "I do my homework every day.",
                        persian: "Ù…Ù† Ù‡Ø± Ø±ÙˆØ² ØªÚ©Ø§Ù„ÛŒÙÙ… Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡Ù…."
                    }
                ]
            }
        ],
        collocations: [
            "do homework",
            "do exercise",
            "do business",
            "do your best",
            "do nothing"
        ],
        phrasalVerbs: [
            {
                verb: "do up",
                persian: "Ø¨Ø³ØªÙ† (Ø¯Ú©Ù…Ù‡)",
                example: "Do up your coat. (Ú©ÙØª Ø±Ø§ Ø¨Ø¨Ù†Ø¯.)"
            },
            {
                verb: "do without",
                persian: "Ø¨Ø¯ÙˆÙ† Ú†ÛŒØ²ÛŒ Ø³Ø± Ú©Ø±Ø¯Ù†",
                example: "I can do without coffee. (Ù…ÛŒâ€ŒØªÙˆÙ†Ù… Ø¨Ø¯ÙˆÙ† Ù‚Ù‡ÙˆÙ‡ Ø³Ø± Ú©Ù†Ù….)"
            }
        ],
        synonyms: ["perform", "execute"],
        frequency: 10
    },

    "work": {
        word: "work",
        phonetic: "/wÉœËrk/",
        level: "A1",
        meanings: [
            {
                partOfSpeech: "verb",
                persian: "Ú©Ø§Ø± Ú©Ø±Ø¯Ù†",
                english: "to do a job or activity",
                examples: [
                    {
                        english: "I work from 9 to 5.",
                        persian: "Ù…Ù† Ø§Ø² Û¹ ØªØ§ Ûµ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù…."
                    },
                    {
                        english: "She works in a bank.",
                        persian: "Ø§Ùˆ Ø¯Ø± ÛŒÚ© Ø¨Ø§Ù†Ú© Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯."
                    }
                ]
            },
            {
                partOfSpeech: "noun",
                persian: "Ú©Ø§Ø±",
                english: "activity involving mental or physical effort",
                examples: [
                    {
                        english: "I have a lot of work to do.",
                        persian: "Ú©Ø§Ø± Ø²ÛŒØ§Ø¯ÛŒ Ø¯Ø§Ø±Ù… Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯Ù‡Ù…."
                    }
                ]
            }
        ],
        collocations: [
            "work hard",
            "work late",
            "work from home",
            "work environment",
            "work experience"
        ],
        phrasalVerbs: [
            {
                verb: "work out",
                persian: "ÙˆØ±Ø²Ø´ Ú©Ø±Ø¯Ù† / Ø­Ù„ Ú©Ø±Ø¯Ù†",
                example: "I work out at the gym. (Ù…Ù† Ø¯Ø± Ø¨Ø§Ø´Ú¯Ø§Ù‡ ÙˆØ±Ø²Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ù….)"
            },
            {
                verb: "work on",
                persian: "Ø±ÙˆÛŒ Ú†ÛŒØ²ÛŒ Ú©Ø§Ø± Ú©Ø±Ø¯Ù†",
                example: "I'm working on a new project. (Ø±ÙˆÛŒ ÛŒÙ‡ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù….)"
            }
        ],
        synonyms: ["job", "labor", "employment"],
        frequency: 9
    },

    "go": {
        word: "go",
        phonetic: "/É¡oÊŠ/",
        level: "A1",
        meanings: [
            {
                partOfSpeech: "verb",
                persian: "Ø±ÙØªÙ†",
                english: "to move or travel somewhere",
                examples: [
                    {
                        english: "I go to school every day.",
                        persian: "Ù…Ù† Ù‡Ø± Ø±ÙˆØ² Ø¨Ù‡ Ù…Ø¯Ø±Ø³Ù‡ Ù…ÛŒâ€ŒØ±ÙˆÙ…."
                    },
                    {
                        english: "Let's go to the park.",
                        persian: "Ø¨ÛŒØ§ Ø¨Ø±ÛŒÙ… Ù¾Ø§Ø±Ú©."
                    }
                ]
            }
        ],
        collocations: [
            "go home",
            "go shopping",
            "go to school",
            "go crazy",
            "go online"
        ],
        phrasalVerbs: [
            {
                verb: "go on",
                persian: "Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø¯Ù†",
                example: "Please go on with your story. (Ù„Ø·ÙØ§Ù‹ Ø§Ø¯Ø§Ù…Ù‡ Ù‚ØµÙ‡â€ŒØ§Øª Ø±Ùˆ Ø¨Ø¯Ù‡.)"
            },
            {
                verb: "go out",
                persian: "Ø¨ÛŒØ±ÙˆÙ† Ø±ÙØªÙ†",
                example: "We go out every Friday. (Ù…Ø§ Ù‡Ø± Ø¬Ù…Ø¹Ù‡ Ø¨ÛŒØ±ÙˆÙ† Ù…ÛŒâ€ŒØ±ÛŒÙ….)"
            },
            {
                verb: "go up",
                persian: "Ø¨Ø§Ù„Ø§ Ø±ÙØªÙ†",
                example: "Prices go up every year. (Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ Ù‡Ø± Ø³Ø§Ù„ Ø¨Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ±Ù‡.)"
            }
        ],
        synonyms: ["move", "travel", "leave"],
        frequency: 10
    },

    // 11-20: Ø§Ø¯Ø§Ù…Ù‡ Ø§ÙØ¹Ø§Ù„
    "come": {
        word: "come",
        phonetic: "/kÊŒm/",
        level: "A1",
        meanings: [
            {
                partOfSpeech: "verb",
                persian: "Ø¢Ù…Ø¯Ù†",
                english: "to move towards the speaker or a place",
                examples: [
                    {
                        english: "Come here, please.",
                        persian: "Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ†Ø¬Ø§ Ø¨ÛŒØ§."
                    },
                    {
                        english: "She comes to work by bus.",
                        persian: "Ø§Ùˆ Ø¨Ø§ Ø§ØªÙˆØ¨ÙˆØ³ Ø¨Ù‡ Ø³Ø± Ú©Ø§Ø± Ù…ÛŒâ€ŒØ¢ÛŒØ¯."
                    }
                ]
            }
        ],
        collocations: [
            "come here",
            "come back",
            "come home",
            "come soon",
            "come with me"
        ],
        phrasalVerbs: [
            {
                verb: "come from",
                persian: "Ø§Ù‡Ù„ Ø¬Ø§ÛŒÛŒ Ø¨ÙˆØ¯Ù†",
                example: "I come from Iran. (Ù…Ù† Ø§Ù‡Ù„ Ø§ÛŒØ±Ø§Ù†Ù….)"
            },
            {
                verb: "come back",
                persian: "Ø¨Ø±Ú¯Ø´ØªÙ†",
                example: "Come back soon! (Ø²ÙˆØ¯ Ø¨Ø±Ú¯Ø±Ø¯!)"
            },
            {
                verb: "come up",
                persian: "Ù¾ÛŒØ´ Ø¢Ù…Ø¯Ù†",
                example: "Something came up. (ÛŒÙ‡ Ú†ÛŒØ²ÛŒ Ù¾ÛŒØ´ Ø§ÙˆÙ…Ø¯.)"
            }
        ],
        synonyms: ["arrive", "approach"],
        frequency: 9
    },

    "get": {
        word: "get",
        phonetic: "/É¡et/",
        level: "A1",
        meanings: [
            {
                partOfSpeech: "verb",
                persian: "Ú¯Ø±ÙØªÙ† / Ø´Ø¯Ù†",
                english: "to receive, obtain, or become",
                examples: [
                    {
                        english: "I get a lot of emails.",
                        persian: "Ù…Ù† Ø§ÛŒÙ…ÛŒÙ„ Ø²ÛŒØ§Ø¯ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†Ù…."
                    },
                    {
                        english: "It's getting dark.",
                        persian: "Ø¯Ø§Ø±Ø¯ ØªØ§Ø±ÛŒÚ© Ù…ÛŒâ€ŒØ´ÙˆØ¯."
                    }
                ]
            }
        ],
        collocations: [
            "get ready",
            "get married",
            "get better",
            "get a job",
            "get home"
        ],
        phrasalVerbs: [
            {
                verb: "get up",
                persian: "Ø¨Ù„Ù†Ø¯ Ø´Ø¯Ù†",
                example: "I get up at 7 AM. (Ù…Ù† Ø³Ø§Ø¹Øª Û· ØµØ¨Ø­ Ø¨Ù„Ù†Ø¯ Ù…ÛŒâ€ŒØ´Ù….)"
            },
            {
                verb: "get on",
                persian: "Ø³ÙˆØ§Ø± Ø´Ø¯Ù†",
                example: "Get on the bus. (Ø³ÙˆØ§Ø± Ø§ØªÙˆØ¨ÙˆØ³ Ø´Ùˆ.)"
            },
            {
                verb: "get off",
                persian: "Ù¾ÛŒØ§Ø¯Ù‡ Ø´Ø¯Ù†",
                example: "Get off at the next station. (Ø§ÛŒØ³ØªÚ¯Ø§Ù‡ Ø¨Ø¹Ø¯ÛŒ Ù¾ÛŒØ§Ø¯Ù‡ Ø´Ùˆ.)"
            }
        ],
        synonyms: ["receive", "obtain", "become"],
        frequency: 10
    },

    "make": {
        word: "make",
        phonetic: "/meÉªk/",
        level: "A1",
        meanings: [
            {
                partOfSpeech: "verb",
                persian: "Ø³Ø§Ø®ØªÙ†",
                english: "to create or produce something",
                examples: [
                    {
                        english: "She makes beautiful cakes.",
                        persian: "Ø§Ùˆ Ú©ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ¨Ø§ÛŒÛŒ Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯."
                    },
                    {
                        english: "I need to make a decision.",
                        persian: "Ù…Ù† Ø¨Ø§ÛŒØ¯ ÛŒÚ© ØªØµÙ…ÛŒÙ… Ø¨Ú¯ÛŒØ±Ù…."
                    }
                ]
            }
        ],
        collocations: [
            "make money",
            "make friends",
            "make dinner",
            "make progress",
            "make sure"
        ],
        phrasalVerbs: [
            {
                verb: "make up",
                persian: "Ø³Ø§Ø®ØªÙ† / Ø¬Ø¨Ø±Ø§Ù† Ú©Ø±Ø¯Ù†",
                example: "I made up a story. (ÛŒÙ‡ Ø¯Ø§Ø³ØªØ§Ù† Ø³Ø§Ø®ØªÙ….)"
            },
            {
                verb: "make out",
                persian: "ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù†",
                example: "I can't make out the words. (Ù†Ù…ÛŒâ€ŒØªÙˆÙ†Ù… Ú©Ù„Ù…Ø§Øª Ø±Ùˆ ØªØ´Ø®ÛŒØµ Ø¨Ø¯Ù….)"
            }
        ],
        synonyms: ["create", "produce", "build"],
        frequency: 9
    },

    "need": {
        word: "need",
        phonetic: "/niËd/",
        level: "A1",
        meanings: [
            {
                partOfSpeech: "verb",
                persian: "Ù†ÛŒØ§Ø² Ø¯Ø§Ø´ØªÙ†",
                english: "to require something because it is essential",
                examples: [
                    {
                        english: "I need some help.",
                        persian: "Ù…Ù† Ø¨Ù‡ Ú©Ù…ÛŒ Ú©Ù…Ú© Ù†ÛŒØ§Ø² Ø¯Ø§Ø±Ù…."
                    },
                    {
                        english: "You need to study more.",
                        persian: "ØªÙˆ Ø¨Ø§ÛŒØ¯ Ø¨ÛŒØ´ØªØ± Ø¯Ø±Ø³ Ø¨Ø®ÙˆØ§Ù†ÛŒ."
                    }
                ]
            }
        ],
        collocations: [
            "need help",
            "need time",
            "need money",
            "need to know",
            "special needs"
        ],
        synonyms: ["require", "want"],
        frequency: 8
    },

    "want": {
        word: "want",
        phonetic: "/wÉ‘Ënt/",
        level: "A1",
        meanings: [
            {
                partOfSpeech: "verb",
                persian: "Ø®ÙˆØ§Ø³ØªÙ†",
                english: "to desire or wish for something",
                examples: [
                    {
                        english: "I want a cup of coffee.",
                        persian: "Ù…Ù† ÛŒÚ© ÙÙ†Ø¬Ø§Ù† Ù‚Ù‡ÙˆÙ‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù…."
                    },
                    {
                        english: "She wants to learn English.",
                        persian: "Ø§Ùˆ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ø¯ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±Ø¯."
                    }
                ]
            }
        ],
        collocations: [
            "want to go",
            "want more",
            "want it now",
            "want something",
            "want someone"
        ],
        synonyms: ["desire", "wish", "crave"],
        frequency: 9
    },

    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† 10 Ù„ØºØª Ù†Ù…ÙˆÙ†Ù‡ Ø¯ÛŒÚ¯Ø± Ø¨Ø±Ø§ÛŒ ØªØ³Øª
    "time": {
        word: "time",
        phonetic: "/taÉªm/",
        level: "A1",
        meanings: [
            {
                partOfSpeech: "noun",
                persian: "Ø²Ù…Ø§Ù†",
                english: "the indefinite continued progress of existence",
                examples: [
                    {
                        english: "What time is it?",
                        persian: "Ø³Ø§Ø¹Øª Ú†Ù†Ø¯Ù‡ØŸ"
                    },
                    {
                        english: "I don't have much time.",
                        persian: "Ù…Ù† ÙˆÙ‚Øª Ø²ÛŒØ§Ø¯ÛŒ Ù†Ø¯Ø§Ø±Ù…."
                    }
                ]
            }
        ],
        collocations: [
            "spend time",
            "waste time",
            "save time",
            "free time",
            "on time"
        ],
        phrases: [
            {
                phrase: "in time",
                persian: "Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹",
                example: "We arrived just in time. (Ù…Ø§ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ Ø±Ø³ÛŒØ¯ÛŒÙ….)"
            },
            {
                phrase: "from time to time",
                persian: "Ú¯Ø§Ù‡ÛŒ Ø§ÙˆÙ‚Ø§Øª",
                example: "I visit them from time to time. (Ú¯Ø§Ù‡ÛŒ Ø¨Ù‡Ø´ÙˆÙ† Ø³Ø± Ù…ÛŒâ€ŒØ²Ù†Ù….)"
            }
        ],
        synonyms: ["duration", "period", "moment"],
        frequency: 10
    },

    "people": {
        word: "people",
        phonetic: "/ËˆpiËpÉ™l/",
        level: "A1",
        meanings: [
            {
                partOfSpeech: "noun",
                persian: "Ù…Ø±Ø¯Ù…",
                english: "human beings in general",
                examples: [
                    {
                        english: "Many people were at the park.",
                        persian: "Ù…Ø±Ø¯Ù… Ø²ÛŒØ§Ø¯ÛŒ Ø¯Ø± Ù¾Ø§Ø±Ú© Ø¨ÙˆØ¯Ù†Ø¯."
                    },
                    {
                        english: "Young people like new technology.",
                        persian: "Ø¬ÙˆØ§Ù†â€ŒÙ‡Ø§ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±Ù†Ø¯."
                    }
                ]
            }
        ],
        collocations: [
            "old people",
            "young people",
            "local people",
            "important people",
            "people say"
        ],
        synonyms: ["persons", "humans", "individuals"],
        frequency: 9
    },

    "good": {
        word: "good",
        phonetic: "/É¡ÊŠd/",
        level: "A1",
        meanings: [
            {
                partOfSpeech: "adjective",
                persian: "Ø®ÙˆØ¨",
                english: "of a favorable character or tendency",
                examples: [
                    {
                        english: "She is a good student.",
                        persian: "Ø§Ùˆ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø®ÙˆØ¨ÛŒ Ø§Ø³Øª."
                    },
                    {
                        english: "This is good news.",
                        persian: "Ø§ÛŒÙ† Ø®Ø¨Ø± Ø®ÙˆØ¨ÛŒ Ø§Ø³Øª."
                    }
                ]
            }
        ],
        collocations: [
            "good morning",
            "good idea",
            "good job",
            "good luck",
            "good friend"
        ],
        synonyms: ["excellent", "fine", "great"],
        antonyms: ["bad", "poor"],
        frequency: 10
    }
};

// ØªØ§Ø¨Ø¹ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù„ØºØª
function searchWord(word) {
    const wordLower = word.toLowerCase().trim();
    
    if (DICTIONARY_DB[wordLower]) {
        return DICTIONARY_DB[wordLower];
    }
    
    // Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø´Ø§Ø¨Ù‡
    const similarWords = findSimilarWords(wordLower);
    if (similarWords.length > 0) {
        return {
            word: wordLower,
            suggestions: similarWords,
            message: "Ù„ØºØª ÛŒØ§ÙØª Ù†Ø´Ø¯ØŒ Ø¢ÛŒØ§ Ù…Ù†Ø¸ÙˆØ± Ø´Ù…Ø§ ÛŒÚ©ÛŒ Ø§Ø² Ø§ÛŒÙ†â€ŒÙ‡Ø§Ø³ØªØŸ"
        };
    }
    
    return null;
}

// Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ú©Ù„Ù…Ø§Øª Ù…Ø´Ø§Ø¨Ù‡
function findSimilarWords(word) {
    const similar = [];
    const wordLength = word.length;
    
    for (const dictWord in DICTIONARY_DB) {
        if (
            dictWord.startsWith(word) ||
            dictWord.includes(word) ||
            word.includes(dictWord) ||
            calculateSimilarity(word, dictWord) > 0.7
        ) {
            similar.push({
                word: dictWord,
                meaning: DICTIONARY_DB[dictWord].meanings[0].persian
            });
            
            if (similar.length >= 5) break;
        }
    }
    
    return similar;
}

// Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¨Ø§Ù‡Øª Ø¨ÛŒÙ† Ú©Ù„Ù…Ø§Øª
function calculateSimilarity(word1, word2) {
    const longer = word1.length > word2.length ? word1 : word2;
    const shorter = word1.length > word2.length ? word2 : word1;
    
    if (longer.length === 0) return 1.0;
    
    return (longer.length - editDistance(longer, shorter)) / parseFloat(longer.length);
}

// ÙØ§ØµÙ„Ù‡ Ø§Ø¯ÛŒØª
function editDistance(word1, word2) {
    word1 = word1.toLowerCase();
    word2 = word2.toLowerCase();
    
    const costs = [];
    for (let i = 0; i <= word1.length; i++) {
        let lastValue = i;
        for (let j = 0; j <= word2.length; j++) {
            if (i === 0) {
                costs[j] = j;
            } else if (j > 0) {
                let newValue = costs[j - 1];
                if (word1.charAt(i - 1) !== word2.charAt(j - 1)) {
                    newValue = Math.min(Math.min(newValue, lastValue), costs[j]) + 1;
                }
                costs[j - 1] = lastValue;
                lastValue = newValue;
            }
        }
        if (i > 0) costs[word2.length] = lastValue;
    }
    return costs[word2.length];
}

// Ú¯Ø±ÙØªÙ† Ù„ÛŒØ³Øª ØªÙ…Ø§Ù… Ù„ØºØ§Øª
function getAllWords() {
    return Object.keys(DICTIONARY_DB).map(word => ({
        word: word,
        meaning: DICTIONARY_DB[word].meanings[0].persian,
        level: DICTIONARY_DB[word].level,
        frequency: DICTIONARY_DB[word].frequency
    }));
}

// Ú¯Ø±ÙØªÙ† Ù„ØºØ§Øª Ø¨Ø± Ø§Ø³Ø§Ø³ Ø³Ø·Ø­
function getWordsByLevel(level) {
    return Object.keys(DICTIONARY_DB)
        .filter(word => DICTIONARY_DB[word].level === level)
        .map(word => ({
            word: word,
            meaning: DICTIONARY_DB[word].meanings[0].persian
        }));
}

// Ú¯Ø±ÙØªÙ† Ù„ØºØ§Øª Ù¾Ø±ØªÚ©Ø±Ø§Ø±
function getCommonWords(limit = 50) {
    return Object.keys(DICTIONARY_DB)
        .map(word => ({
            word: word,
            frequency: DICTIONARY_DB[word].frequency || 5,
            meaning: DICTIONARY_DB[word].meanings[0].persian
        }))
        .sort((a, b) => b.frequency - a.frequency)
        .slice(0, limit);
}

// Ú¯Ø±ÙØªÙ† Ù„ØºØ§Øª ØªØµØ§Ø¯ÙÛŒ Ø¨Ø±Ø§ÛŒ ØªØ³Øª
function getRandomWords(count = 10) {
    const words = Object.keys(DICTIONARY_DB);
    const randomWords = [];
    
    for (let i = 0; i < Math.min(count, words.length); i++) {
        const randomIndex = Math.floor(Math.random() * words.length);
        randomWords.push({
            word: words[randomIndex],
            meaning: DICTIONARY_DB[words[randomIndex]].meanings[0].persian,
            level: DICTIONARY_DB[words[randomIndex]].level
        });
    }
    
    return randomWords;
}

// Ú¯Ø±ÙØªÙ† Ù„ØºØ§Øª Ø¨Ø§ Ú©Ø§Ù„ÙˆÚ©ÛŒØ´Ù† Ø®Ø§Øµ
function getWordsWithCollocation(collocation) {
    return Object.keys(DICTIONARY_DB)
        .filter(word => 
            DICTIONARY_DB[word].collocations && 
            DICTIONARY_DB[word].collocations.some(c => c.toLowerCase().includes(collocation.toLowerCase()))
        )
        .map(word => ({
            word: word,
            collocations: DICTIONARY_DB[word].collocations.filter(c => 
                c.toLowerCase().includes(collocation.toLowerCase())
            )
        }));
}

// Ú¯Ø±ÙØªÙ† ØªÙ…Ø§Ù… Ù„ØºØ§Øª Ø¨Ø§ Ø¬Ø²Ø¦ÛŒØ§Øª
function getCompleteDictionary() {
    return DICTIONARY_DB;
}

// ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ù„ØºØ§Øª
function getTotalWordCount() {
    return Object.keys(DICTIONARY_DB).length;
}

// ØµØ§Ø¯Ø± Ú©Ø±Ø¯Ù† ØªÙˆØ§Ø¨Ø¹
window.DictionaryDB = {
    searchWord,
    getAllWords,
    getWordsByLevel,
    getCommonWords,
    getRandomWords,
    getWordsWithCollocation,
    getCompleteDictionary,
    getTotalWordCount,
    findSimilarWords,
    DICTIONARY_DB
};

// Ù„Ø§Ú¯ Ø¨Ø±Ø§ÛŒ ØªØ³Øª
console.log("ğŸ“˜ DictionaryDB loaded successfully!");
console.log(`Total words: ${getTotalWordCount()}`);
console.log("Available functions: searchWord, getAllWords, getRandomWords, etc.");
