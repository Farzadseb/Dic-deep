<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FredDic Pro - Educational Edition</title>
    <style>
        :root { --bg: #e6ebf1; --shd: 7px 7px 14px #c8d0d9, -7px -7px 14px #ffffff; --inner: inset 5px 5px 10px #c8d0d9, inset -5px -5px 10px #ffffff; --txt: #2c3e50; --blue: #1a73e8; --red: #d32f2f; }
        [data-theme="dark"] { --bg: #1a1c1e; --shd: 6px 6px 12px #000, -2px -2px 10px #333; --inner: inset 4px 4px 8px #000, inset -2px -2px 8px #333; --txt: #eee; }
        body { background: var(--bg); font-family: sans-serif; direction: rtl; margin: 0; padding: 10px; color: var(--txt); transition: 0.3s; }
        .app { width: 100%; max-width: 400px; margin: auto; padding-bottom: 120px; }
        .box { background: var(--bg); border-radius: 25px; box-shadow: var(--shd); padding: 20px; margin-bottom: 15px; text-align: center; }
        .nav-btn { padding: 18px; border-radius: 20px; border: none; color: white; font-weight: bold; cursor: pointer; box-shadow: var(--shd); font-size: 14px; width: 100%; transition: 0.2s; }
        .nav-btn:active { transform: scale(0.98); box-shadow: var(--inner); }
        .footer { position: fixed; bottom: 0; left: 0; right: 0; background: var(--bg); padding: 15px; display: flex; justify-content: space-around; align-items: center; border-radius: 30px 30px 0 0; box-shadow: 0 -5px 15px rgba(0,0,0,0.1); }
        .overlay { position: fixed; inset: 0; background: var(--bg); z-index: 2000; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 20px; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from {opacity:0} to {opacity:1} }
    </style>
</head>
<body>

<div class="app">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
        <button onclick="toggleTheme()" style="background:none; border:none; font-size:24px;">ğŸŒ“</button>
        <b id="userBadge">ğŸ‘¤ Ù…ÛŒÙ‡Ù…Ø§Ù†</b>
        <button id="muteBtn" onclick="toggleMute()" style="background:none; border:none; font-size:24px;">ğŸ”Š</button>
    </div>

    <div class="box">
        <input type="text" id="wordInp" placeholder="Search word..." style="width:80%; height:45px; border-radius:12px; border:none; background:var(--bg); box-shadow:var(--inner); padding:0 10px; text-align:left; direction:ltr; outline:none;">
        <button onclick="doSearch()" style="background:none; border:none; font-size:24px; vertical-align:middle; cursor:pointer;">ğŸ”</button>
    </div>

    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
        <button class="nav-btn" style="background:#3498db" onclick="openPractice()">ğŸ“ ØªÙ…Ø±ÛŒÙ† Ø±ÙˆØ²Ø§Ù†Ù‡</button>
        <button class="nav-btn" style="background:#f39c12" onclick="startMatch()">ğŸ® Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ†</button>
        <button class="nav-btn" style="background:#9b59b6" onclick="activateVIP()">ğŸ’ ØªØ§ÛŒÛŒØ¯ Ú©Ø§Ø±Ø¨Ø±</button>
        <button class="nav-btn" style="background:#27ae60">ğŸ—‚ Ù„Ø§ÛŒØªÙ†Ø± (0)</button>
    </div>
</div>

<div id="practiceOverlay" class="overlay">
    <div class="box" style="width:90%">
        <h2 style="color:var(--blue)">Daily Practice</h2>
        <div id="practiceStep">
            <p>Ú©Ù„Ù…Ù‡ Ø²ÛŒØ± Ø±Ø§ Ø¨Ø´Ù†ÙˆÛŒØ¯ Ùˆ Ù…Ø¹Ù†ÛŒ Ø¯Ø±Ø³Øª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:</p>
            <button class="nav-btn" style="background:var(--blue); width:50px; margin:10px auto;" onclick="spk('Work')">ğŸ”Š</button>
            <div style="display:grid; gap:10px; margin-top:20px;">
                <button class="nav-btn" style="background:#7f8c8d" onclick="checkPractice(true)">Ú©Ø§Ø± Ú©Ø±Ø¯Ù†</button>
                <button class="nav-btn" style="background:#7f8c8d" onclick="checkPractice(false)">Ø®ÙˆØ§Ø¨ÛŒØ¯Ù†</button>
            </div>
        </div>
        <button class="nav-btn" style="background:var(--red); margin-top:30px;" onclick="closePractice()">Ø§Ù†ØµØ±Ø§Ù</button>
    </div>
</div>

<div class="footer">
    <span id="clickStat">ğŸ“ 0/5</span>
    <span style="font-size:40px;">ğŸ†</span>
    <span>â­ <span id="starCount">0</span></span>
</div>

<script>
    const TG_URL = "https://api.telegram.org/bot8553224514:AAG0XXzA8da55jCGXnzStP-0IxHhnfkTPRw/sendMessage";
    const CHAT_ID = "96991859";

    let db = JSON.parse(localStorage.getItem('fred_db_v3')) || { type: 'guest', clicks: 0, stars: 0 };
    let isMuted = false;

    function saveDB() { localStorage.setItem('fred_db_v3', JSON.stringify(db)); updateUI(); }
    function updateUI() {
        document.getElementById('userBadge').innerText = db.type === 'student' ? "ğŸ‘¨â€ğŸ“ Ø´Ø§Ú¯Ø±Ø¯ VIP" : "ğŸ‘¤ Ù…ÛŒÙ‡Ù…Ø§Ù†";
        document.getElementById('clickStat').innerText = db.type === 'student' ? "ğŸ“ âˆ" : `ğŸ“ ${db.clicks}/5`;
        document.getElementById('starCount').innerText = db.stars;
    }

    // Ø¨Ø®Ø´ ØªÙ…Ø±ÛŒÙ† Ø±ÙˆØ²Ø§Ù†Ù‡
    function openPractice() {
        if(db.type === 'guest' && db.clicks >= 5) { alert("Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù…ÛŒÙ‡Ù…Ø§Ù†!"); return; }
        document.getElementById('practiceOverlay').style.display = 'flex';
    }

    function checkPractice(isCorrect) {
        if(isCorrect) {
            alert("âœ… Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯! Û± Ø§Ù…ØªÛŒØ§Ø² Ú¯Ø±ÙØªÛŒØ¯.");
            db.stars += 1;
            db.clicks += 1;
            saveDB();
            sendReport(`ğŸ“ ØªÙ…Ø±ÛŒÙ† Ø±ÙˆØ²Ø§Ù†Ù‡: Ø´Ø§Ú¯Ø±Ø¯ Ù…ÙˆÙÙ‚ Ø´Ø¯.`);
        } else {
            alert("âŒ Ø§Ø´ØªØ¨Ø§Ù‡ Ø¨ÙˆØ¯. Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†!");
        }
        closePractice();
    }

    function closePractice() { document.getElementById('practiceOverlay').style.display = 'none'; }

    // Ø³Ø§ÛŒØ± ØªÙˆØ§Ø¨Ø¹ (Ø¬Ø³ØªØ¬ÙˆØŒ Ù…Ø³Ø§Ø¨Ù‚Ù‡ØŒ ØªÙ… Ùˆ ØºÛŒØ±Ù‡ Ù…Ø´Ø§Ø¨Ù‡ Ù‚Ø¨Ù„...)
    function spk(t) {
        if(isMuted) return;
        window.speechSynthesis.cancel();
        let m = new SpeechSynthesisUtterance(t);
        m.lang = 'en-US'; m.rate = 0.7;
        window.speechSynthesis.speak(m);
    }

    function toggleMute() { isMuted = !isMuted; document.getElementById('muteBtn').innerText = isMuted ? "ğŸ”‡" : "ğŸ”Š"; }
    function toggleTheme() { document.documentElement.setAttribute('data-theme', document.documentElement.getAttribute('data-theme') === "dark" ? "" : "dark"); }
    async function sendReport(msg) { fetch(`${TG_URL}?chat_id=${CHAT_ID}&text=${encodeURIComponent(msg)}`).catch(()=>{}); }
    function activateVIP() { 
        let c = prompt("Ú©Ø¯ Ù„Ø§ÛŒØ³Ù†Ø³:"); 
        if(c === "FRED-2025") { db.type='student'; saveDB(); alert("ØªØ§ÛŒÛŒØ¯ Ø´Ø¯!"); location.reload(); }
    }

    updateUI();
</script>
</body>
</html>
