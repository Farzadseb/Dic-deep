<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Fred Elite V4.5</title>

  <style>
    :root { 
      --bg: #e0e5ec; --text: #333; --accent: #1e40af; 
      /* ØªØºÛŒÛŒØ± Ø±Ù†Ú¯ Ù…Ø¹Ù†ÛŒ Ø§Ø² Ù‚Ø±Ù…Ø² Ø¨Ù‡ Ø¢Ø¨ÛŒ Ù…ØªØ§Ù„ÛŒÚ© Ù…Ù„Ø§ÛŒÙ… */
      --sub-text: #576574; 
      --shadow: 6px 6px 12px #b8bec5, -6px -6px 12px #ffffff;
      --inner: inset 4px 4px 8px #b8bec5, inset -4px -4px 8px #ffffff;
    }
    body.dark-mode { 
      --bg: #2d3436; --text: #dfe6e9; --accent: #81ecec;
      --sub-text: #a4b0be;
      --shadow: 6px 6px 12px #1b1f20, -6px -6px 12px #3f494d;
      --inner: inset 4px 4px 8px #1b1f20, inset -4px -4px 8px #3f494d;
    }
    body { background-color: var(--bg); color: var(--text); font-family: Tahoma, sans-serif; margin: 0; padding: 15px; transition: 0.3s; }
    
    .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .icon-btn { width: 55px; height: 55px; border-radius: 50%; border: none; background: var(--bg); box-shadow: var(--shadow); cursor: pointer; font-size: 22px; color: var(--text); }
    
    .search-input { width: 100%; padding: 18px; border-radius: 50px; border: none; background: var(--bg); box-shadow: var(--inner); outline: none; text-align: center; font-size: 18px; color: var(--text); margin-bottom: 20px; }

    .word-card { background: var(--bg); border-radius: 30px; box-shadow: var(--shadow); padding: 25px; margin-bottom: 25px; display: none; }
    .card-header { display: flex; flex-direction: row-reverse; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    .word-en { font-size: 38px; font-weight: bold; color: var(--accent); margin: 0; }
    .word-fa { font-size: 30px; font-weight: bold; color: var(--sub-text); margin: 0; }

    .block { margin-top: 25px; text-align: left; direction: ltr; }
    .block h3 { font-size: 14px; color: #888; margin-bottom: 8px; border-bottom: 1px solid #ccc; padding-bottom: 3px; }
    
    /* Ú©Ø§Ø¯Ø± Ù…ØªÙ† Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ */
    .content-box { background: var(--bg); box-shadow: var(--inner); padding: 15px; border-radius: 18px; font-size: 20px; font-weight: bold; color: var(--text); margin-bottom: 5px; }
    
    /* Ù…ØªÙ† Ù…Ø¹Ù†ÛŒ ÙØ§Ø±Ø³ÛŒ Ø¯Ø± Ù¾Ø§ÛŒÛŒÙ† Ú©Ø§Ø¯Ø± */
    .fa-meaning { direction: rtl; text-align: right; color: var(--sub-text); font-size: 17px; font-weight: bold; margin-top: 5px; margin-right: 10px; }

    .actions { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .btn { padding: 18px; border-radius: 20px; border: none; color: white; font-size: 19px; font-weight: bold; cursor: pointer; box-shadow: var(--shadow); }
    .btn-exit { grid-column: span 2; background: #ee5253; margin-top: 10px; }
  </style>
</head>
<body onclick="app.initAudio()">

  <header class="top-bar">
    <button id="speakerBtn" class="icon-btn" onclick="app.toggleMute()">ğŸ”Š</button>
    <div style="font-weight: bold;">Guest Mode ğŸ‘¤</div>
    <button class="icon-btn" onclick="app.toggleTheme()">ğŸŒ“</button>
  </header>

  <section>
    <input type="text" id="searchInput" class="search-input" placeholder="Search a word..." oninput="app.search()" />
  </section>

  <main id="wordCard" class="word-card">
    <div class="card-header">
      <h1 id="enMain" class="word-en"></h1>
      <h2 id="faMain" class="word-fa"></h2>
    </div>

    <div class="block">
      <h3>Definition</h3>
      <div id="defBox" class="content-box"></div> <p id="defFa" class="fa-meaning"></p> </div>

    <div class="block">
      <h3>Example</h3>
      <div id="exBox" class="content-box"></div>
      <p id="exFa" class="fa-meaning"></p>
    </div>

    <div class="block">
      <h3>Collocations</h3>
      <div id="collBox" class="content-box"></div>
      <p id="collFa" class="fa-meaning"></p>
    </div>

    <div class="block">
      <h3>Phrasal Verbs</h3>
      <div id="phrBox" class="content-box"></div>
      <p id="phrFa" class="fa-meaning"></p>
    </div>
  </main>

  <nav class="actions">
    <button class="btn" style="background: #3498db;" onclick="app.startQuiz()">ğŸ“ ØªÙ…Ø±ÛŒÙ†</button>
    <button class="btn" style="background: #2ecc71;" onclick="alert('Leitner coming soon')">ğŸ“‚ Ù„Ø§ÛŒØªÙ†Ø±</button>
    <button class="btn" style="background: #f39c12;" onclick="alert('Quiz coming soon')">ğŸ® Ù…Ø³Ø§Ø¨Ù‚Ù‡</button>
    <button class="btn" style="background: #9b59b6;" onclick="alert('VIP features')">ğŸ’ VIP</button>
    <button class="btn btn-exit" onclick="location.reload()">âœ– Ø®Ø±ÙˆØ¬</button>
  </nav>

  <script>
    const script = document.createElement('script');
    script.src = "dictionary.js?v=" + Date.now();
    document.head.appendChild(script);

    const app = {
      isMuted: false, audioInit: false,
      initAudio() { if(!this.audioInit) { window.speechSynthesis.getVoices(); this.audioInit = true; } },
      toggleTheme() { document.body.classList.toggle('dark-mode'); },
      toggleMute() {
        this.isMuted = !this.isMuted;
        document.getElementById('speakerBtn').innerText = this.isMuted ? "ğŸ”‡" : "ğŸ”Š";
      },
      search() {
        const term = document.getElementById('searchInput').value.trim().toLowerCase();
        const card = document.getElementById('wordCard');
        if(!term || typeof dictionary === 'undefined') { card.style.display = 'none'; return; }
        
        const f = dictionary.find(w => w.en.toLowerCase() === term);
        if(f) {
          card.style.display = 'block';
          document.getElementById('enMain').innerText = f.en.toUpperCase();
          document.getElementById('faMain').innerText = f.fa;
          
          // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ: Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ø¯Ø± Ú©Ø§Ø¯Ø±ØŒ ÙØ§Ø±Ø³ÛŒ Ø¯Ø± Ù¾Ø§ÛŒÛŒÙ†
          document.getElementById('defBox').innerText = f.def || "---";
          document.getElementById('defFa').innerText = f.defFa || "";

          document.getElementById('exBox').innerText = f.ex || "---";
          document.getElementById('exFa').innerText = f.exFa || "";

          document.getElementById('collBox').innerText = f.col || "---";
          document.getElementById('collFa').innerText = f.colFa || "";

          document.getElementById('phrBox').innerText = f.phr || "---";
          document.getElementById('phrFa').innerText = f.phrFa || "";

          if(!this.isMuted) {
            window.speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(f.en);
            u.lang = 'en-US'; u.rate = 0.8;
            window.speechSynthesis.speak(u);
          }
        } else { card.style.display = 'none'; }
      },
      startQuiz() { alert("Quiz logic starting..."); }
    };
  </script>
</body>
</html>
