<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dic-Deep Elite</title>
    <link rel="manifest" href="manifest.json">
    <style>
        :root { --bg: #e0e5ec; --accent: #4a90e2; --shadow: 9px 9px 16px rgb(163,177,198,0.6), -9px -9px 16px rgba(255,255,255, 0.5); }
        body.dark { --bg: #2d3436; --shadow: 5px 5px 10px #23282a, -5px -5px 10px #374042; color: white; }
        body { background: var(--bg); font-family: Tahoma; transition: 0.3s; padding: 20px; margin: 0; }
        .neu-card { background: var(--bg); border-radius: 20px; box-shadow: var(--shadow); padding: 20px; margin-bottom: 20px; text-align: center; }
        .neu-btn { border: none; background: var(--bg); box-shadow: var(--shadow); padding: 12px 20px; border-radius: 12px; cursor: pointer; color: var(--accent); font-weight: bold; transition: 0.2s; }
        .neu-btn:active { transform: scale(0.95); }
        .hidden { display: none; }
        .search-input { width: 100%; border: none; background: var(--bg); box-shadow: inset 5px 5px 10px #b8bec5, inset -5px -5px 10px #ffffff; padding: 15px; border-radius: 15px; outline: none; box-sizing: border-box; text-align: center; }
        .example-box { font-size: 0.8em; background: rgba(0,0,0,0.05); padding: 10px; border-radius: 10px; margin-top: 10px; text-align: left; direction: ltr; }
        @keyframes pop { from { transform: translate(-50%, -45%) scale(0.9); opacity: 0; } to { transform: translate(-50%, -50%) scale(1); opacity: 1; } }
    </style>
</head>
<body class="light">

    <div class="neu-card">
        <div style="display:flex; justify-content: space-between; align-items: center;">
            <button class="neu-btn" onclick="app.toggleTheme()">ğŸŒ“</button>
            <h3 id="scoreDisp" style="margin:0; color:var(--accent);">Score: 0</h3>
            <div id="starDisp">â­ 0</div>
        </div>
    </div>

    <div id="vipArea" class="neu-card">
        <h3>ğŸ”’ ÙˆØ±ÙˆØ¯ VIP</h3>
        <input type="text" id="vipCode" class="search-input" placeholder="Ú©Ø¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
        <button class="neu-btn" style="margin-top:15px; width:100%;" onclick="app.checkVIP()">ØªØ§ÛŒÛŒØ¯</button>
    </div>

    <div id="mainContent" class="hidden">
        <div class="neu-card">
            <input type="text" id="wordInput" class="search-input" placeholder="ğŸ” Ø¬Ø³ØªØ¬Ùˆ..." oninput="app.liveSearch()">
            <div id="results"></div>
        </div>
        <div class="neu-card">
            <h3 id="quizQ">Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯ØŸ</h3>
            <div id="options" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;"></div>
            <button id="startBtn" class="neu-btn" style="width:100%; margin-top:10px;" onclick="app.startQuiz()">Ø´Ø±ÙˆØ¹ Ú†Ø§Ù„Ø´</button>
        </div>
    </div>

    <script src="dictionary.js"></script>
    <script>
        class DicDeepApp {
            constructor() {
                this.score = 0; this.stars = 0; this.testCount = 0;
                this.theme = 'light';
                window.app = this;
            }

            toggleTheme() { 
                this.theme = this.theme === 'light' ? 'dark' : 'light';
                document.body.className = this.theme;
            }

            checkVIP() {
                if(document.getElementById('vipCode').value === "FRED-2025") {
                    document.getElementById('vipArea').style.display = 'none';
                    document.getElementById('mainContent').classList.remove('hidden');
                    this.sendLog("ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚");
                }
            }

            liveSearch() {
                const term = document.getElementById('wordInput').value.toLowerCase();
                const res = document.getElementById('results');
                res.innerHTML = "";
                if(!term) return;
                dictionary.filter(w => w.en.includes(term) || w.fa.includes(term)).slice(0,2).forEach(w => {
                    res.innerHTML += `<div class="neu-card" style="box-shadow:none; border:1px solid #ccc; text-align:right;">
                        <b>${w.en}</b>: ${w.fa}<div class="example-box">${w.ex}</div></div>`;
                });
            }

            startQuiz() {
                document.getElementById('startBtn').classList.add('hidden');
                const correct = dictionary[Math.floor(Math.random() * dictionary.length)];
                const opts = [correct];
                while(opts.length < 4) {
                    const r = dictionary[Math.floor(Math.random() * dictionary.length)];
                    if(!opts.includes(r)) opts.push(r);
                }
                opts.sort(() => Math.random() - 0.5);
                document.getElementById('quizQ').innerText = `Meaning of "${correct.en}"?`;
                const div = document.getElementById('options'); div.innerHTML = "";
                opts.forEach(o => {
                    const b = document.createElement('button'); b.className = "neu-btn"; b.innerText = o.fa;
                    b.onclick = () => this.handleAns(o === correct);
                    div.appendChild(b);
                });
            }

            handleAns(isCorrect) {
                if(isCorrect) { this.score += 20; if(this.score % 100 === 0) this.stars++; }
                this.testCount++;
                document.getElementById('scoreDisp').innerText = `Score: ${this.score}`;
                document.getElementById('starDisp').innerText = `â­ ${this.stars}`;
                if(this.testCount >= 5) { this.showModal(); this.testCount = 0; }
                this.startQuiz();
            }

            showModal() {
                const m = document.createElement('div');
                m.id = "contactModal";
                m.innerHTML = `
                    <div style="position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); z-index:1000; width:85%; max-width:350px; padding:25px; border-radius:30px; background:var(--bg); box-shadow:var(--shadow); text-align:center; border:2px solid var(--accent); animation: pop 0.4s ease;">
                        <div style="font-size:40px;">ğŸ“</div>
                        <h2 style="color:var(--accent); margin:10px 0;">ØªØ³Ù„Ø· Ú©Ø§Ù…Ù„ Ø¨Ø§ Ø§Ø³ØªØ§Ø¯</h2>
                        <p style="line-height:1.6; font-size:0.95em;">ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù„ØºØ§Øª Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø§Ù…Ø§ Ø¨Ø±Ø§ÛŒ <b>ØµØ­Ø¨Øª Ú©Ø±Ø¯Ù† Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</b> Ø¨Ù‡ Ø¢Ù…ÙˆØ²Ø´ Ø§ØµÙˆÙ„ÛŒ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±ÛŒ. Ù…Ù† Ø¨Ø±Ø§ÛŒ ØªØ¯Ø±ÛŒØ³ Ø¯Ø± Ú©Ù†Ø§Ø± ØªÙˆ Ù‡Ø³ØªÙ….</p>
                        <div style="display:flex; justify-content:space-around; margin-top:20px;">
                            <a href="https://wa.me/989017708544?text=Ø³Ù„Ø§Ù… Ø§Ø³ØªØ§Ø¯ØŒ Ù…Ø§ÛŒÙ„ Ø¨Ù‡ Ø´Ø±Ú©Øª Ø¯Ø± Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ ØªØ¯Ø±ÛŒØ³ Ú©Ø§Ù…Ù„ Ù‡Ø³ØªÙ…." style="text-decoration:none;">
                                <button class="neu-btn" style="background:#25D366; color:white; width:60px; height:60px; border-radius:50%;">ğŸŸ¢</button>
                                <div style="font-size:10px; margin-top:5px; color:black;">WhatsApp</div>
                            </a>
                            <a href="tel:09017708544" style="text-decoration:none;">
                                <button class="neu-btn" style="background:var(--accent); color:white; width:60px; height:60px; border-radius:50%;">ğŸ“</button>
                                <div style="font-size:10px; margin-top:5px; color:black;">Call</div>
                            </a>
                        </div>
                        <button class="neu-btn" onclick="document.getElementById('contactModal').remove(); document.getElementById('ovl').remove();" style="margin-top:20px; width:100%;">Ø§Ø¯Ø§Ù…Ù‡ ØªÙ…Ø±ÛŒÙ† ğŸš€</button>
                    </div>
                    <div id="ovl" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:999; backdrop-filter:blur(3px);"></div>`;
                document.body.appendChild(m);
            }

            async sendLog(msg) {
                const url = `https://api.telegram.org/bot553224514:AAG0XXzA8da55jCGXnzStP-0IxHhnfkTPRw/sendMessage?chat_id=969918598&text=${encodeURIComponent(msg)}`;
                try { fetch(url); } catch(e) {}
            }
        }
        const app = new DicDeepApp();
    </script>
</body>
</html>
