<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FredDic Pro - Master Edition</title>
    <style>
        :root { --bg: #e0e0e0; --shd: 8px 8px 16px #bebebe, -8px -8px 16px #ffffff; --inner: inset 6px 6px 12px #bebebe, inset -6px -6px 12px #ffffff; --blue: #2d5bc0; --red: #d32f2f; --txt: #444; }
        [data-theme="dark"] { --bg: #1a1c1e; --shd: 6px 6px 12px #0a0a0a, -3px -3px 10px #2a2c2e; --inner: inset 4px 4px 8px #0a0a0a, inset -2px -2px 8px #2a2c2e; --txt: #eee; }
        body { margin: 0; background: var(--bg); font-family: sans-serif; direction: rtl; color: var(--txt); transition: 0.3s; padding: 15px; }
        .search-area { position: relative; margin: 20px 0; }
        .search-box { display: flex; align-items: center; background: var(--bg); box-shadow: var(--inner); border-radius: 20px; padding: 5px 15px; }
        .search-box input { flex: 1; border: none; background: none; height: 48px; outline: none; color: var(--txt); text-align: center; font-size: 16px; direction: ltr; }
        .suggestions { position: absolute; top: 60px; left: 0; right: 0; background: var(--bg); border-radius: 15px; box-shadow: var(--shd); z-index: 1000; display: none; max-height: 200px; overflow-y: auto; }
        .suggest-item { padding: 15px; border-bottom: 1px solid rgba(0,0,0,0.05); cursor: pointer; text-align: left; direction: ltr; font-weight: bold; }
        .card { background: var(--bg); border-radius: 35px; box-shadow: var(--shd); padding: 25px; display: none; }
        .en-main { color: var(--blue); font-size: 32px; font-weight: 900; text-align: left; }
        .fa-main { color: var(--red); font-size: 22px; font-weight: bold; text-align: right; margin-top: -35px; }
        .label { font-size: 12px; color: #888; display: block; margin: 15px 0 5px 0; text-align: left; border-bottom: 1px solid #ccc; direction: ltr; }
        .content-box { background: var(--bg); border-radius: 18px; padding: 12px; box-shadow: var(--shd); font-weight: bold; font-size: 16px; text-align: left; direction: ltr; width: 100%; border: none; margin-top: 5px; color: var(--txt); cursor: pointer; }
        .trans { color: var(--red); font-size: 13px; text-align: left; margin: 5px 0 10px 0; direction: rtl; }
    </style>
</head>
<body>

<div style="display:flex; justify-content:space-between; align-items:center;">
    <button onclick="toggleTheme()" class="content-box" style="width:45px; height:45px; padding:0;">üåì</button>
    <b id="status">üë§ Guest Mode</b>
    <button onclick="activateVIP()" class="content-box" style="width:45px; height:45px; padding:0;">üíé</button>
</div>

<div class="search-area">
    <div class="search-box">
        <input type="text" id="wordInp" placeholder="Search (d... or ŸÅÿßÿ±ÿ≥€å)" oninput="handleTyping(this.value)">
        <span>üîç</span>
    </div>
    <div id="suggestList" class="suggestions"></div>
</div>

<div id="resCard" class="card">
    <div class="en-main" id="hEn"></div>
    <div class="fa-main" id="hFa"></div>
    
    <span class="label">Example:</span>
    <button class="content-box" id="btnEx" onclick="spk(this.innerText)"></button>
    <div class="trans" id="hExFa"></div>

    <span class="label">Collocations & Phrasal Verbs:</span>
    <button class="content-box" id="btnCol" onclick="spk(this.innerText)"></button>
    <div class="trans" id="hColFa"></div>
</div>

<script>
    const TG_URL = "https://api.telegram.org/bot8553224514:AAG0XXzA8da55jCGXnzStP-0IxHhnfkTPRw/sendMessage";
    const CHAT_ID = "96991859";

    // ÿØ€åÿ™ÿßÿ®€åÿ≥ €±€∞€∞ ŸÑÿ∫ÿ™ (ŸÜŸÖŸàŸÜŸá)
    const dictionary = {
        "be": { fa: "ÿ®ŸàÿØŸÜ", ex: "Be happy.", exFa: "ÿÆŸàÿ¥ÿ≠ÿßŸÑ ÿ®ÿßÿ¥.", col: "be careful / be able to", colFa: "ŸÖÿ±ÿßŸÇÿ® ÿ®ŸàÿØŸÜ / ÿ™ŸàÿßŸÜÿ≥ÿ™ŸÜ" },
        "do": { fa: "ÿßŸÜÿ¨ÿßŸÖ ÿØÿßÿØŸÜ", ex: "Do your best.", exFa: "ÿ®Ÿáÿ™ÿ±€åŸÜÿ™ ÿ±ÿß ÿßŸÜÿ¨ÿßŸÖ ÿ®ÿØŸá.", col: "do homework / do over", colFa: "ŸÖÿ¥ŸÇ ŸÜŸàÿ¥ÿ™ŸÜ / ÿ™⁄©ÿ±ÿßÿ± ⁄©ÿ±ÿØŸÜ" },
        "day": { fa: "ÿ±Ÿàÿ≤", ex: "Nice day.", exFa: "ÿ±Ÿàÿ≤ ÿÆŸàÿ®€å ÿßÿ≥ÿ™.", col: "every day / day off", colFa: "Ÿáÿ± ÿ±Ÿàÿ≤ / ÿ±Ÿàÿ≤ ÿ™ÿπÿ∑€åŸÑ" },
        "drink": { fa: "ŸÜŸàÿ¥€åÿØŸÜ", ex: "Drink water.", exFa: "ÿ¢ÿ® ÿ®ŸÜŸàÿ¥.", col: "soft drink / drink up", colFa: "ŸÜŸàÿ¥ÿßÿ®Ÿá / ÿ™ÿß ÿ™Ÿá ŸÜŸàÿ¥€åÿØŸÜ" }
    };

    let db = JSON.parse(localStorage.getItem('fred_final_v40')) || { type: 'guest', clicks: 0 };

    function handleTyping(val) {
        let list = document.getElementById('suggestList');
        if (!val) { list.style.display = 'none'; return; }
        let filtered = Object.keys(dictionary).filter(k => k.startsWith(val.toLowerCase()) || dictionary[k].fa.includes(val));
        list.innerHTML = filtered.map(w => `<div class="suggest-item" onclick="showWord('${w}')">${w.toUpperCase()} - ${dictionary[w].fa}</div>`).join('');
        list.style.display = filtered.length ? 'block' : 'none';
    }

    function showWord(w) {
        if(db.type === 'guest' && db.clicks >= 5) { alert("ŸÖÿ≠ÿØŸàÿØ€åÿ™ ŸÖ€åŸáŸÖÿßŸÜ! ⁄©ÿØ VIP ÿ®ÿ≤ŸÜ€åÿØ."); return; }
        let word = dictionary[w];
        document.getElementById('resCard').style.display = 'block';
        document.getElementById('suggestList').style.display = 'none';
        document.getElementById('hEn').innerText = w.toUpperCase();
        document.getElementById('hFa').innerText = word.fa;
        document.getElementById('btnEx').innerText = word.ex;
        document.getElementById('hExFa').innerText = word.exFa;
        document.getElementById('btnCol').innerText = word.col;
        document.getElementById('hColFa').innerText = word.colFa;
        spk(w);
        db.clicks++;
        saveDB();
        sendReport(`üîç Search: ${w} (User: ${db.type})`);
    }

    function saveDB() { localStorage.setItem('fred_final_v40', JSON.stringify(db)); updateUI(); }
    function updateUI() { document.getElementById('status').innerText = db.type === 'student' ? "üë®‚Äçüéì VIP Mode" : `üë§ Guest (${db.clicks}/5)`; }
    function activateVIP() { if(prompt("Code:") === "FRED-2025") { db.type='student'; saveDB(); } }
    function spk(t) { window.speechSynthesis.cancel(); let m = new SpeechSynthesisUtterance(t); m.lang='en-US'; window.speechSynthesis.speak(m); }
    function toggleTheme() { document.documentElement.setAttribute('data-theme', document.documentElement.getAttribute('data-theme') === 'dark' ? '' : 'dark'); }
    async function sendReport(m) { fetch(`${TG_URL}?chat_id=${CHAT_ID}&text=${encodeURIComponent(m)}`).catch(()=>{}); }
    updateUI();
</script>
</body>
</html>
