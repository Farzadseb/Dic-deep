<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FredDic Pro - Master Fred</title>
    <style>
        :root {
            --bg-color: #e0e0e0;
            --card-bg: #e0e0e0;
            --text-dark: #444;
            --accent: #2563eb;
            --shadow: 8px 8px 16px #bebebe, -8px -8px 16px #ffffff;
            --inner-shadow: inset 4px 4px 8px #bebebe, inset -4px -4px 8px #ffffff;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-dark);
            font-family: 'Tahoma', sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container { width: 100%; max-width: 400px; }

        h1 { text-align: center; font-size: 22px; margin-bottom: 5px; }
        .sub-header { text-align: center; font-size: 14px; margin-bottom: 20px; }

        /* Search Box */
        .search-area {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }
        input {
            flex: 1;
            padding: 15px;
            border-radius: 12px;
            border: none;
            background: var(--bg-color);
            box-shadow: var(--inner-shadow);
            outline: none;
            direction: ltr;
        }
        .btn-search {
            padding: 10px 20px;
            border-radius: 12px;
            border: none;
            background: var(--bg-color);
            box-shadow: var(--shadow);
            cursor: pointer;
            font-size: 20px;
        }

        /* Result Card */
        .card {
            background: var(--card-bg);
            border-radius: 30px;
            padding: 25px;
            box-shadow: var(--shadow);
            display: none; /* Ù…Ø®ÙÛŒ ØªØ§ Ø²Ù…Ø§Ù† Ø¬Ø³ØªØ¬Ùˆ */
            margin-bottom: 20px;
            direction: ltr;
        }

        .word-header { font-size: 24px; font-weight: bold; margin-bottom: 10px; }
        .farsi-line { direction: rtl; text-align: right; margin-bottom: 10px; font-weight: bold; }
        .label { font-weight: bold; color: #666; margin-top: 15px; display: block; }
        
        .btn-item {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px;
            margin: 8px 0;
            border-radius: 10px;
            border: none;
            background: #d1d1d1;
            box-shadow: 2px 2px 5px #bebebe, -2px -2px 5px #ffffff;
            cursor: pointer;
            font-size: 15px;
        }

        .btn-item:active { box-shadow: inset 2px 2px 5px #bebebe; }

        /* Quiz & Social */
        .btn-main {
            width: 100%;
            padding: 15px;
            border-radius: 15px;
            border: none;
            background: var(--accent);
            color: white;
            font-weight: bold;
            box-shadow: 4px 4px 10px #bebebe;
            cursor: pointer;
            margin-top: 10px;
        }

        #guestPanel {
            display: none;
            background: #f8d7da;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            margin-top: 15px;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>FredDic Pro</h1>
    <div class="sub-header">PDCS System - Master Fred</div>

    <div class="search-area">
        <input type="text" id="wordInput" placeholder="Ú©Ù„Ù…Ù‡ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³...">
        <button class="btn-search" onclick="handleSearch()">ğŸ”</button>
    </div>

    <div id="resultCard" class="card">
        <div class="word-header" id="txtWord">Word</div>
        
        <div class="farsi-line">ÙØ§Ø±Ø³ÛŒ: <span id="txtFarsi">Ù…Ø¹Ù†ÛŒ</span></div>
        
        <span class="label">English:</span>
        <div id="txtDef" style="margin-bottom:10px;">Definition goes here.</div>

        <span class="label">Example:</span>
        <button class="btn-item" id="btnEx" onclick="speak(this.innerText)"></button>
        <div class="farsi-line" id="txtExFarsi" style="font-weight:normal; font-size:14px;"></div>

        <span class="label">Collocations:</span>
        <div id="colList"></div>

        <span class="label">Phrasal Verbs:</span>
        <div id="phrasalList"></div>
    </div>

    <button class="btn-main" onclick="startMatch()">Ø´Ø±ÙˆØ¹ Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ø¨Ø§ AI</button>

    <div id="guestPanel">
        ØªØ¹Ø¯Ø§Ø¯ Ø³Ø±Ú† Ø±Ø§ÛŒÚ¯Ø§Ù† ØªÙ…Ø§Ù… Ø´Ø¯. Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø§ Ø§Ø³ØªØ§Ø¯ Fred ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯:
        <br><br>
        <a id="waLink" href="#" style="color:#d9534f; font-weight:bold; text-decoration:none;">Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¯Ø± ÙˆØ§ØªØ³â€ŒØ§Ù¾ (Û°Û¹Û°Û±Û·Û·Û°Û¸ÛµÛ´Û´)</a>
    </div>
</div>

<script>
    const CONFIG = {
        token: "8553224514:AAG0XXzA8da55jCGXnzStP-0IxHhnfkTPRw",
        chatId: "96991859",
        wa: "989017708544"
    };

    // Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ù„ØºØ§Øª (Û±Û° Ù„ØºØª Ø§ÙˆÙ„ Ù„ÛŒØ³Øª Ø´Ù…Ø§)
    const pdcsDb = {
        "be": { f: "Ø¨ÙˆØ¯Ù†", d: "to exist", ex: "Just be yourself.", exF: "ÙÙ‚Ø· Ø®ÙˆØ¯Øª Ø¨Ø§Ø´.", c: ["be careful", "be happy"], p: ["be up to"] },
        "have": { f: "Ø¯Ø§Ø´ØªÙ†", d: "to possess", ex: "I have a car.", exF: "Ù…Ù† ÛŒÚ© Ù…Ø§Ø´ÛŒÙ† Ø¯Ø§Ø±Ù….", c: ["have a look", "have fun"], p: ["have on"] },
        "work": { f: "Ú©Ø§Ø± Ú©Ø±Ø¯Ù†", d: "to do a job", ex: "I work daily.", exF: "Ù…Ù† Ø±ÙˆØ²Ø§Ù†Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù….", c: ["hard work", "work-life balance"], p: ["work out", "work on"] },
        "take": { f: "Ú¯Ø±ÙØªÙ†ØŒ Ø¨Ø±Ø¯Ø§Ø´ØªÙ†", d: "to get or carry", ex: "Take your time.", exF: "Ø¹Ø¬Ù„Ù‡ Ù†Ú©Ù† (Ø²Ù…Ø§Ù† Ø¨Ú¯Ø°Ø§Ø±).", c: ["take a break", "take notes"], p: ["take off", "take over"] },
        "go": { f: "Ø±ÙØªÙ†", d: "to move", ex: "Go to school.", exF: "Ø¨Ù‡ Ù…Ø¯Ø±Ø³Ù‡ Ø¨Ø±Ùˆ.", c: ["go crazy", "go blind"], p: ["go on", "go out"] }
        // Ø³Ø§ÛŒØ± Ù„ØºØ§Øª Ù„ÛŒØ³Øª Û²Û°Û° ØªØ§ÛŒÛŒ Ø±Ø§ Ø¨Ù‡ Ù‡Ù…ÛŒÙ† ÙØ±Ù…Øª Ø§ÛŒÙ†Ø¬Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
    };

    let searchCount = 0;

    function speak(text) {
        window.speechSynthesis.cancel();
        const msg = new SpeechSynthesisUtterance(text);
        msg.rate = 0.7; // Ø³Ø±Ø¹Øª 0.7 Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ
        msg.lang = 'en-US';
        const voices = window.speechSynthesis.getVoices();
        // ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† ØµØ¯Ø§ÛŒ Ø®Ø§Ù†Ù…
        msg.voice = voices.find(v => v.name.includes('Female') || v.lang === 'en-US') || voices[0];
        window.speechSynthesis.speak(msg);
    }

    function handleSearch() {
        const word = document.getElementById('wordInput').value.toLowerCase().trim();
        searchCount++;

        if (searchCount > 5) {
            document.getElementById('guestPanel').style.display = 'block';
            document.getElementById('waLink').href = `https://wa.me/${CONFIG.wa}?text=Ø³Ù„Ø§Ù… Ø§Ø³ØªØ§Ø¯ ÙØ±Ø¯ØŒ Ù…Ù† ØªÙ…Ø§ÛŒÙ„ Ø¨Ù‡ Ø®Ø±ÛŒØ¯ Ø§Ø´ØªØ±Ø§Ú© Ø¯Ø§Ø±Ù….`;
            return;
        }

        const data = pdcsDb[word];
        if (data) {
            document.getElementById('resultCard').style.display = 'block';
            document.getElementById('txtWord').innerText = word.toUpperCase();
            document.getElementById('txtFarsi').innerText = data.f;
            document.getElementById('txtDef').innerText = data.d;
            document.getElementById('btnEx').innerText = data.ex;
            document.getElementById('txtExFarsi').innerText = data.exF;
            
            renderButtons('colList', data.c);
            renderButtons('phrasalList', data.p);
            
            speak(word);
            sendReport(`Ú©Ø§Ø±Ø¨Ø± Ù„ØºØª [${word}] Ø±Ø§ Ø³Ø±Ú† Ú©Ø±Ø¯.`);
        } else {
            alert("Ù„ØºØª Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ ÙØ¹Ù„ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.");
        }
    }

    function renderButtons(id, list) {
        const div = document.getElementById(id);
        div.innerHTML = '';
        list.forEach(item => {
            const b = document.createElement('button');
            b.className = 'btn-item';
            b.innerText = item;
            b.onclick = () => speak(item);
            div.appendChild(b);
        });
    }

    function startMatch() {
        alert("Ø¯Ø± Ø­Ø§Ù„ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø±Ù‚ÛŒØ¨... Û³Û° Ø«Ø§Ù†ÛŒÙ‡ Ù…Ù†ØªØ¸Ø± Ø¨Ù…Ø§Ù†ÛŒØ¯.");
        setTimeout(() => {
            alert("Ø±Ù‚ÛŒØ¨ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯. Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ø¨Ø§ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ (AI) Ø´Ø±ÙˆØ¹ Ø´Ø¯!");
            sendReport("Ú©Ø§Ø±Ø¨Ø± Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ø¨Ø§ AI Ø±Ø§ Ø´Ø±ÙˆØ¹ Ú©Ø±Ø¯.");
        }, 30000);
    }

    async function sendReport(msg) {
        const url = `https://api.telegram.org/bot${CONFIG.token}/sendMessage?chat_id=${CONFIG.chatId}&text=${encodeURIComponent("Ú¯Ø²Ø§Ø±Ø´ FredDic:\n" + msg)}`;
        fetch(url).catch(() => {});
    }
</script>

</body>
</html>
