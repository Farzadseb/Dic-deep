<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FredDic Pro - Master Fred</title>
    <style>
        :root {
            --bg: #e0e0e0;
            --shadow: 7px 7px 14px #bebebe, -7px -7px 14px #ffffff;
            --inner-shadow: inset 4px 4px 8px #bebebe, inset -4px -4px 8px #ffffff;
            --blue: #2563eb;
        }
        body { 
            background: var(--bg); font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            display: flex; justify-content: center; padding: 15px; color: #333; -webkit-font-smoothing: antialiased;
        }
        .app { width: 100%; max-width: 400px; }
        
        /* Ø¨Ø®Ø´ Ø³Ø±Ú† */
        .search-area { display: flex; gap: 10px; margin-bottom: 20px; }
        input { 
            flex: 1; padding: 18px; border-radius: 15px; border: none; 
            background: var(--bg); box-shadow: var(--inner-shadow); 
            font-size: 20px; outline: none; direction: ltr; -webkit-appearance: none;
        }
        .search-btn {
            background: var(--bg); border: none; box-shadow: var(--shadow);
            border-radius: 15px; padding: 15px; cursor: pointer; font-size: 22px;
        }

        /* Ú©Ø§Ø±Øª Ù„ØºØª - ÙÙˆÙ†Øª Ø¯ÙˆØ¨Ø±Ø§Ø¨Ø± */
        .card { 
            background: var(--bg); border-radius: 30px; padding: 25px; 
            box-shadow: var(--shadow); display: none; direction: ltr; text-align: left; 
        }
        h2#wordTitle { 
            font-size: 80px; /* ÙÙˆÙ†Øª Ø¯ÙˆØ¨Ø±Ø§Ø¨Ø± Ù†Ø³Ø¨Øª Ø¨Ù‡ Ù‚Ø¨Ù„ */
            margin: 0; color: var(--blue); text-transform: uppercase; line-height: 1;
        }
        
        .label { font-size: 18px; font-weight: bold; color: #666; margin-top: 15px; display: block; }
        #txtDef { font-size: 22px; line-height: 1.3; color: #444; }
        .farsi { direction: rtl; text-align: right; color: #d32f2f; font-size: 24px; font-weight: bold; display: block; }

        .btn-item { 
            width: 100%; text-align: left; padding: 18px; margin: 8px 0; 
            border-radius: 15px; border: none; background: #dcdcdc; 
            box-shadow: 3px 3px 6px #bebebe, -3px -3px 6px #ffffff; 
            cursor: pointer; font-size: 22px; font-weight: bold; -webkit-tap-highlight-color: transparent;
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÛŒÙ†ÛŒ */
        .btn-group { display: flex; flex-direction: column; gap: 15px; margin-top: 30px; }
        .btn-main { 
            width: 100%; padding: 20px; border-radius: 20px; border: none; 
            color: white; font-weight: bold; cursor: pointer; font-size: 24px; 
            box-shadow: 5px 5px 10px #aaa;
        }
        .btn-blue { background: var(--blue); }
        .btn-green { background: #16a34a; }
        .btn-orange { background: #ea580c; }

        /* Ø§Ø³ØªØ§ÛŒÙ„ ØªØ³Øª */
        .quiz-option { margin-bottom: 10px; background: white; padding: 15px; border-radius: 10px; cursor: pointer; text-align: center; font-size: 20px; }
    </style>
</head>
<body>

<div class="app">
    <h1 style="text-align: center; font-size: 32px; margin-bottom: 20px;">FredDic Pro</h1>
    
    <div class="search-area">
        <input type="text" id="wordInput" placeholder="Word...">
        <button class="search-btn" onclick="handleSearch()">ğŸ”</button>
    </div>

    <div id="resultCard" class="card">
        <h2 id="wordTitle"></h2>
        <span class="farsi" id="txtFarsiMain" style="font-size: 30px; margin-top: 10px;"></span>
        <span class="label">Definition:</span>
        <div id="txtDef"></div>
        <span class="label">Example (Tap to Speak):</span>
        <button class="btn-item" id="btnEx" onclick="speak(this.innerText)"></button>
        <span class="farsi" id="txtExFarsi"></span>
        <div id="colList"></div>
    </div>

    <div id="quizArea" style="display:none; margin-top:20px; text-align:center;">
        <h3 id="quizQuestion" style="font-size:24px;"></h3>
        <div id="quizOptions"></div>
    </div>

    <div class="btn-group">
        <button class="btn-main btn-blue" onclick="startMatch()">ğŸ† Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ†</button>
        <button class="btn-main btn-green" id="btnLeitner" onclick="practiceLeitner()">ğŸ—‚ ØªÙ…Ø±ÛŒÙ† Ù„Ø§ÛŒØªÙ†Ø± (Û°)</button>
        <button class="btn-main btn-orange" onclick="startDailyTest()">ğŸ“ ØªØ³Øª Ù„ØºØ§Øª Ø±ÙˆØ²Ø§Ù†Ù‡</button>
    </div>
</div>

<script>
    const pdcsDb = {
        "work": { f: "Ú©Ø§Ø± Ú©Ø±Ø¯Ù†", d: "To perform a task", ex: "I work daily", exF: "Ù…Ù† Ø±ÙˆØ²Ø§Ù†Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù…", cols: [{en: "hard work", fa: "Ú©Ø§Ø± Ø³Ø®Øª"}] },
        "take": { f: "Ú¯Ø±ÙØªÙ†", d: "To get something", ex: "Take it easy", exF: "Ø³Ø®Øª Ù†Ú¯ÛŒØ±", cols: [{en: "take a break", fa: "Ø§Ø³ØªØ±Ø§Ø­Øª Ú©Ø±Ø¯Ù†"}] },
        "go": { f: "Ø±ÙØªÙ†", d: "To move", ex: "Let's go home", exF: "Ø¨ÛŒØ§ Ø¨Ø±ÛŒÙ… Ø®ÙˆÙ†Ù‡", cols: [{en: "go away", fa: "Ø¯ÙˆØ± Ø´Ø¯Ù†"}] }
    };

    let leitnerList = JSON.parse(localStorage.getItem('leitner')) || [];
    updateLeitnerUI();

    function handleSearch() {
        const word = document.getElementById('wordInput').value.toLowerCase().trim();
        const data = pdcsDb[word];
        if (data) {
            document.getElementById('quizArea').style.display = 'none';
            document.getElementById('resultCard').style.display = 'block';
            document.getElementById('wordTitle').innerText = word;
            document.getElementById('txtFarsiMain').innerText = data.f;
            document.getElementById('txtDef').innerText = data.d;
            document.getElementById('btnEx').innerText = data.ex;
            document.getElementById('txtExFarsi').innerText = data.exF;
            speak(word);
        } else { alert("ÛŒØ§ÙØª Ù†Ø´Ø¯."); }
    }

    function speak(t) {
        window.speechSynthesis.cancel();
        const m = new SpeechSynthesisUtterance(t);
        m.lang = 'en-US'; m.rate = 0.7;
        window.speechSynthesis.speak(m);
    }

    // Ø³ÛŒØ³ØªÙ… ØªØ³Øª Ø±ÙˆØ²Ø§Ù†Ù‡
    function startDailyTest() {
        document.getElementById('resultCard').style.display = 'none';
        const keys = Object.keys(pdcsDb);
        const randomWord = keys[Math.floor(Math.random() * keys.length)];
        const correctFa = pdcsDb[randomWord].f;
        
        document.getElementById('quizArea').style.display = 'block';
        document.getElementById('quizQuestion').innerText = `Ù…Ø¹Ù†ÛŒ "${randomWord.toUpperCase()}" Ú†ÛŒØ³ØªØŸ`;
        
        const options = [correctFa, "Ø®ÙˆØ§Ø¨ÛŒØ¯Ù†", "Ø¯ÙˆÛŒØ¯Ù†", "Ù¾Ø±ÛŒØ¯Ù†"].sort(() => Math.random() - 0.5);
        const optDiv = document.getElementById('quizOptions');
        optDiv.innerHTML = '';
        
        options.forEach(opt => {
            const d = document.createElement('div');
            d.className = 'quiz-option';
            d.innerText = opt;
            d.onclick = () => checkAnswer(opt, correctFa, randomWord);
            optDiv.appendChild(d);
        });
    }

    function checkAnswer(selected, correct, word) {
        if (selected === correct) {
            alert("âœ… Ø¢ÙØ±ÛŒÙ†! Ø¯Ø±Ø³Øª Ø¨ÙˆØ¯.");
            startDailyTest();
        } else {
            alert(`âŒ Ø§Ø´ØªØ¨Ø§Ù‡ Ø¨ÙˆØ¯! Ù„ØºØª "${word}" Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ø¨Ù‡ Ù„Ø§ÛŒØªÙ†Ø± Ø±ÙØª.`);
            if (!leitnerList.includes(word)) {
                leitnerList.push(word);
                localStorage.setItem('leitner', JSON.stringify(leitnerList));
                updateLeitnerUI();
            }
            startDailyTest();
        }
    }

    function practiceLeitner() {
        if (leitnerList.length === 0) return alert("Ø¬Ø¹Ø¨Ù‡ Ù„Ø§ÛŒØªÙ†Ø± ÙØ¹Ù„Ø§Ù‹ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª.");
        const word = leitnerList[0];
        document.getElementById('wordInput').value = word;
        handleSearch();
        alert(`Ø¯Ø± Ø­Ø§Ù„ ØªÙ…Ø±ÛŒÙ† Ù„ØºØª: ${word}`);
    }

    function updateLeitnerUI() {
        document.getElementById('btnLeitner').innerText = `ğŸ—‚ ØªÙ…Ø±ÛŒÙ† Ù„Ø§ÛŒØªÙ†Ø± (${leitnerList.length})`;
    }

    function startMatch() { alert("Ø¯Ø± Ø­Ø§Ù„ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø±Ù‚ÛŒØ¨..."); }
</script>
</body>
</html>
