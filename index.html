<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FredDic Elite Pro 2025</title>
    <style>
        :root {
            --bg: #e0e5ec;
            --shadow: 9px 9px 16px rgb(163,177,198,0.6), -9px -9px 16px rgba(255,255,255, 0.5);
            --inner-shadow: inset 6px 6px 12px #b8bec5, inset -6px -6px 12px #ffffff;
            --accent: #4a90e2;
        }
        body.dark {
            --bg: #2d3436;
            --shadow: 5px 5px 10px #23282a, -5px -5px 10px #374042;
            --inner-shadow: inset 3px 3px 6px #23282a, inset -3px -3px 6px #374042;
            color: white;
        }
        body { background: var(--bg); font-family: 'Segoe UI', Tahoma; transition: 0.3s; padding: 20px; margin: 0; }
        .neu-card { background: var(--bg); border-radius: 20px; box-shadow: var(--shadow); padding: 20px; margin-bottom: 20px; text-align: center; }
        .neu-btn { border: none; background: var(--bg); box-shadow: var(--shadow); padding: 12px 25px; border-radius: 12px; cursor: pointer; font-weight: bold; color: var(--accent); margin: 5px; transition: 0.2s; }
        .neu-btn:active { box-shadow: var(--inner-shadow); transform: scale(0.98); }
        .hidden { display: none; }
        #progressBar { width: 100%; height: 12px; background: #d1d9e6; border-radius: 6px; overflow: hidden; margin: 15px 0; box-shadow: var(--inner-shadow); }
        #progressInner { width: 0%; height: 100%; background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%); transition: 0.5s; }
        .search-input { width: 100%; border: none; background: var(--bg); box-shadow: var(--inner-shadow); padding: 15px; border-radius: 15px; outline: none; color: var(--accent); font-size: 16px; box-sizing: border-box; }
        .stars-container { font-size: 24px; color: #f1c40f; margin: 10px 0; }
        .example-box { font-size: 0.85em; background: rgba(0,0,0,0.05); padding: 8px; border-radius: 10px; margin-top: 8px; text-align: left; direction: ltr; }
    </style>
</head>
<body class="light">

    <div class="neu-card">
        <div style="display:flex; justify-content: space-between; align-items: center;">
            <button class="neu-btn" onclick="toggleTheme()">üåì</button>
            <h3 id="userDisplay" style="margin:0;">Guest Mode</h3>
            <span id="scoreDisplay" style="font-weight:bold; color:var(--accent);">Score: 0</span>
        </div>
        <div id="progressBar"><div id="progressInner"></div></div>
        <div id="starDisplay" class="stars-container"></div>
    </div>

    <div id="vipArea" class="neu-card">
        <h3>üîí VIP ACCESS</h3>
        <input type="text" id="vipCode" class="search-input" style="text-align:center; margin-bottom:15px;" placeholder="ENTER FRED CODE">
        <button class="neu-btn" onclick="checkVIP()">UNLOCK SYSTEM</button>
    </div>

    <div id="mainContent" class="hidden">
        <div class="neu-card">
            <input type="text" id="search" class="search-input" placeholder="üîç Search English or Persian..." oninput="liveSearch()">
            <div id="results" style="margin-top:20px;"></div>
        </div>

        <div class="neu-card" id="quizArea">
            <h3>ü§ñ AI CHALLENGE</h3>
            <p id="quizQuestion" style="font-size:1.2em; font-weight:bold;">Ready to test your skills?</p>
            <div id="options" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;"></div>
            <div id="timer" style="margin-top:15px; font-weight:bold; color:#e74c3c;"></div>
            <button id="startBtn" class="neu-btn" onclick="startQuiz()">START BATTLE</button>
        </div>
    </div>

    <script src="dictionary.js"></script>
    <script>
        const BOT_TOKEN = '553224514:AAG0XXzA8da55jCGXnzStP-0IxHhnfkTPRw';
        const CHAT_ID = '969918598';
        let UID = "PDCS-" + Math.floor(1000 + Math.random() * 9000);
        let score = 0, stars = 0, aiTimer;

        async function sendLog(msg) {
            const text = `üë§ User: ${UID}\nüéØ Event: ${msg}\nüèÜ Score: ${score}\n‚≠ê Stars: ${stars}`;
            try { await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}`); } catch (e) {}
        }

        function toggleTheme() { document.body.classList.toggle('dark'); }

        function checkVIP() {
            if(document.getElementById('vipCode').value === "FRED-2025") {
                document.getElementById('vipArea').classList.add('hidden');
                document.getElementById('mainContent').classList.remove('hidden');
                document.getElementById('userDisplay').innerText = UID;
                sendLog("System Unlocked");
            } else { alert("Wrong Code!"); }
        }

        function liveSearch() {
            const term = document.getElementById('search').value.toLowerCase();
            const res = document.getElementById('results');
            res.innerHTML = "";
            if(term.length < 1) return;
            dictionary.filter(w => w.en.includes(term) || w.fa.includes(term)).slice(0, 5).forEach(w => {
                res.innerHTML += `
                    <div class="neu-card" style="padding:15px; margin-bottom:10px; box-shadow:var(--inner-shadow);">
                        <div style="display:flex; justify-content:space-between; font-weight:bold; color:var(--accent);">
                            <span>${w.en}</span><span>${w.fa}</span>
                        </div>
                        <div class="example-box">
                            <b>Ex:</b> ${w.ex}<br>
                            <b>Col:</b> ${w.col}<br>
                            <b>Phr:</b> ${w.phr}
                        </div>
                    </div>`;
            });
        }

        function startQuiz() {
            document.getElementById('startBtn').classList.add('hidden');
            const correct = dictionary[Math.floor(Math.random() * dictionary.length)];
            const options = [correct];
            while(options.length < 4) {
                const rand = dictionary[Math.floor(Math.random() * dictionary.length)];
                if(!options.includes(rand)) options.push(rand);
            }
            options.sort(() => Math.random() - 0.5);
            document.getElementById('quizQuestion').innerText = `Meaning of "${correct.en}"?`;
            const optDiv = document.getElementById('options');
            optDiv.innerHTML = "";
            options.forEach(o => {
                const btn = document.createElement('button');
                btn.className = "neu-btn";
                btn.innerText = o.fa;
                btn.onclick = () => handleAnswer(o === correct);
                optDiv.appendChild(btn);
            });
            let sec = 30;
            clearInterval(aiTimer);
            aiTimer = setInterval(() => {
                document.getElementById('timer').innerText = `AI Counter: ${--sec}s`;
                if(sec <= 0) { clearInterval(aiTimer); aiMove(); }
            }, 1000);
        }

        function handleAnswer(isCorrect) {
            clearInterval(aiTimer);
            if(isCorrect) { score += 20; updateStats(); startQuiz(); }
            else { alert("Wrong!"); sendLog("Mistake Made"); startQuiz(); }
        }

        function aiMove() {
            if(Math.random() < 0.3) { score = Math.max(0, score - 10); alert("AI Won!"); }
            else { score += 15; alert("AI Failed!"); }
            updateStats(); startQuiz();
        }

        function updateStats() {
            document.getElementById('scoreDisplay').innerText = `Score: ${score}`;
            document.getElementById('progressInner').style.width = Math.min(100, (score/1000)*100) + "%";
            if(score > 0 && score % 100 === 0) { stars++; document.getElementById('starDisplay').innerHTML = "‚≠ê".repeat(stars); }
        }
    </script>
</body>
</html>
